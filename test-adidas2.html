<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ØªØ§Ø¨Ø¹Ø© Ø·Ù„Ø¨ÙŠ</title>
<style>
body{font-family:Tajawal,Arial;background:#f5f5f5;margin:0}
.box{max-width:500px;margin:40px auto;background:#fff;padding:25px;border-radius:14px;text-align:center}
input,button{width:100%;padding:12px;margin-top:10px;border-radius:8px;border:1px solid #ccc}
button{background:#8b0000;color:#fff;font-size:16px;cursor:pointer}
.result{margin-top:15px;background:#f9f9f9;padding:15px;border-radius:10px}
</style>
</head>
<body>

<div class="box">
<h2>ğŸ“‹ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨</h2>
<input type="tel" id="phone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
<button onclick="check()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
<div id="res"></div>
</div>

<script>
const SEARCH_API="https://script.google.com/macros/s/AKfycbxMbVj_Fb7Gam2LPFOgAUpmuhy7jV9RKT_wBSVjGJ1LWyHYc_VqBoIkZZYHFEPdUY9CpA/exec";

const urlPhone=new URLSearchParams(location.search).get("phone");
if(urlPhone) phone.value=urlPhone;

function norm(p){
 p=p.replace(/\D/g,"");
 if(p.startsWith("213"))p=p.slice(3);
 if(p.startsWith("0"))p=p.slice(1);
 return p;
}

function check(){
 const p=norm(phone.value);
 if(!p)return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ù‡Ø§ØªÙ");
 res.innerHTML="â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...";
 fetch(SEARCH_API+"?phone="+p)
 .then(r=>r.json())
 .then(d=>{
   if(!d.found){
     res.innerHTML="âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨ Ù…Ø³Ø¬Ù„";
     return;
   }
   localStorage.setItem("umrah_phone",p);
   res.innerHTML=`
     <div class="result">
       ğŸ‘¤ Ù…Ø±Ø­Ø¨Ù‹Ø§ <strong>${d.name}</strong><br>
       Ù†Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠÙŠØ³Ø± Ù„Ùƒ Ø§Ù„Ø¹Ù…Ø±Ø© ğŸŒ™<br><br>
       <button onclick="go()">ğŸ•‹ Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</button>
     </div>`;
 });
}

function go(){
 location.href="test-adidas3.html";
}
</script>
</body>
</html>
