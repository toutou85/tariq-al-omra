<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>نموذج تسجيل العمرة</title>
  <style>
    body {
      font-family: 'Tahoma', sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 0;
    }
    .step {
      display: none;
      padding: 20px;
      background: #fff;
      margin: 20px auto;
      max-width: 600px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border-radius: 10px;
    }
    .step.active {
      display: block;
    }
    .buttons {
      margin-top: 20px;
      display: flex;
      justify-content: space-between;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    select, input {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    h2 { color: #333; }
  </style>
</head>
<body>
  <form id="umrahForm">
    <!-- الخطوة 1: اختيار الغرفة والصفة -->
    <div class="step active" id="step1">
      <h2>اختيار نوع الغرفة</h2>
      <select name="نوع الغرفة" id="roomType" required>
        <option value="">-- اختر نوع الغرفة --</option>
        <option value="جامعية">غرفة جامعية</option>
        <option value="خماسية">غرفة خماسية</option>
        <option value="رباعية">غرفة رباعية</option>
        <option value="ثلاثية">غرفة ثلاثية</option>
        <option value="ثنائية">غرفة ثنائية</option>
      </select><h2>اختيار صفة الحجز</h2>
  <select name="صفة الحجز" id="bookingType" required>
    <option value="">-- اختر صفة الحجز --</option>
    <option value="منفرد">منفرد</option>
    <option value="مع أسرة">مع أسرة</option>
    <option value="مع أصدقاء">مع أصدقاء</option>
  </select>

  <div class="buttons">
    <span></span>
    <button type="button" onclick="nextStep()">التالي</button>
  </div>
</div>

<!-- الخطوة 2: اختيار الولاية والفرع -->
<div class="step" id="step2">
  <h2>مكان الإقامة (الولاية)</h2>
  <select name="الولاية" id="state" required>
    <option value="">-- اختر ولايتك --</option>
    <option value="الجزائر">الجزائر</option>
    <option value="عنابة">عنابة</option>
    <option value="قسنطينة">قسنطينة</option>
    <option value="سوق أهراس">سوق أهراس</option>
    <option value="ميلة">ميلة</option>
    <option value="أم البواقي">أم البواقي</option>
    <option value="الشلف">الشلف</option>
    <option value="تقرت">تقرت</option>
    <option value="بومرداس">بومرداس</option>
    <option value="مستغانم">مستغانم</option>
    <option value="المدية">المدية</option>
    <option value="الجلفة">الجلفة</option>
    <option value="المغير">المغير</option>
    <option value="تمنراست">تمنراست</option>
    <option value="بشار">بشار</option>
    <option value="وهران">وهران</option>
    <option value="تلمسان">تلمسان</option>
  </select>

  <h2>اختر فرع الوكالة</h2>
  <select name="الفرع الأقرب" id="branch" required>
    <option value="">-- اختر الفرع --</option>
  </select>

  <div class="buttons">
    <button type="button" onclick="prevStep()">السابق</button>
    <button type="button" onclick="nextStep()">التالي</button>
  </div>
</div>

<!-- الخطوة 3: معلومات الزبون -->
<div class="step" id="step3">
  <h2>معلوماتك الشخصية</h2>
  <input type="text" name="الاسم الكامل" placeholder="الاسم الكامل" required>
  <input type="tel" name="الهاتف" placeholder="رقم الهاتف" required>
  <input type="email" name="البريد الإلكتروني" placeholder="البريد الإلكتروني" required>
  <input type="number" name="العمر" placeholder="العمر" required>
  <label>تاريخ انتهاء جواز السفر:</label>
  <input type="date" name="تاريخ انتهاء جواز السفر" required>

  <div class="buttons">
    <button type="button" onclick="prevStep()">السابق</button>
    <button type="button" onclick="nextStep()">التالي</button>
  </div>
</div>

<!-- الخطوة 4: تأكيد وإرسال -->
<div class="step" id="step4">
  <h2>تأكيد التسجيل</h2>
  <p>يرجى مراجعة معلوماتك ثم الضغط على زر الإرسال.</p>
  <div class="buttons">
    <button type="button" onclick="prevStep()">السابق</button>
    <button type="submit">إرسال الطلب</button>
  </div>
</div>

  </form>  <script>
    const steps = document.querySelectorAll(".step");
    let currentStep = 0;

    function showStep(index) {
      steps.forEach((step, i) => {
        step.classList.toggle("active", i === index);
      });
    }

    function nextStep() {
      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
      }
    }

    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
      }
    }

    // ربط الفروع بالوكالة
    const agency = "وكالة تقرت لسياحة و سفر";
    const branchesByAgency = {
      "وكالة تقرت لسياحة و سفر": ["تقرت", "بومرداس", "الجزائر", "مستغانم", "المدية", "الجلفة", "المغير", "تمنراست", "الشلف", "بشار", "عنابة"],
      "وكالة السقيفة للسياحة و سفر": ["قسنطينة", "عنابة", "سوق أهراس", "ميلة", "أم البواقي"],
      "وكالة الانسية لسياحة و سفر": ["عنابة", "الشلف", "وهران", "تلمسان"]
    };

    function fillBranchesByAgency() {
      const branchSelect = document.getElementById("branch");
      branchSelect.innerHTML = '<option value="">-- اختر الفرع --</option>';
      const branches = branchesByAgency[agency];
      if (branches) {
        branches.forEach(branch => {
          const option = document.createElement("option");
          option.value = branch;
          option.textContent = branch;
          branchSelect.appendChild(option);
        });
      }
    }

    fillBranchesByAgency();

    // ربط بجوجل شيت
    document.getElementById("umrahForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const formData = new FormData(this);
      fetch("https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec", {
        method: "POST",
        body: formData
      })
      .then(response => response.text())
      .then(result => alert("تم إرسال طلبك بنجاح!"))
      .catch(error => alert("حدث خطأ. حاول مرة أخرى."));
    });
  </script></body>
</html>