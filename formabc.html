<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±Ø©</title>
  <style>
    body {
      font-family: 'Tahoma', sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 0;
    }.step {
  display: none;
  padding: 20px;
}

.step.active {
  display: block;
}

.buttons {
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
}

.form-section {
  background: white;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  padding: 20px;
  margin: 20px;
}

input, select {
  width: 100%;
  padding: 10px;
  margin-top: 10px;
  margin-bottom: 20px;
  border: 1px solid #ccc;
  border-radius: 8px;
}

h2 {
  margin-bottom: 20px;
  color: #333;
}

button {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  background: #007bff;
  color: white;
  font-size: 16px;
}

button:hover {
  background: #0056b3;
}

.remove-companion-btn {
  background: red;
  color: white;
  padding: 5px 10px;
  border-radius: 5px;
  border: none;
  cursor: pointer;
  margin-bottom: 10px;
}

  </style>
</head>
<body>
  <form id="umrahForm">
    <!-- <!-- Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø²Ø¨ÙˆÙ† -->
<div class="form-step" id="step2" style="display: none;">
  <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ø¨ÙˆÙ†</h2>

  <label for="firstName">Ø§Ù„Ø§Ø³Ù…:</label>
  <input type="text" id="firstName" name="firstName" required>

  <label for="lastName">Ø§Ù„Ù„Ù‚Ø¨:</label>
  <input type="text" id="lastName" name="lastName" required>

  <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
  <input type="tel" id="phone" name="phone" required>

  <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
  <input type="email" id="email" name="email" required>

  <label for="age">Ø§Ù„Ø¹Ù…Ø±:</label>
  <input type="number" id="age" name="age" min="0" required>

  <label for="passportExpiry">ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø¬ÙˆØ§Ø² Ø§Ù„Ø³ÙØ±:</label>
  <input type="date" id="passportExpiry" name="passportExpiry" required>

  <div class="step-buttons">
    <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
    <button type="button" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
  </div>


<!-- Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ù„ÙˆÙ„Ø§ÙŠØ© ÙˆØ§Ù„ÙØ±Ø¹ -->
<div class="form-step" id="step3" style="display: none;">
  <h2>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆÙ„Ø§ÙŠØ© ÙˆØ§Ù„ÙØ±Ø¹</h2>

  <label for="wilaya">Ø§Ù„ÙˆÙ„Ø§ÙŠØ©:</label>
  <select id="wilaya" name="wilaya" required>
    <option value="">-- Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ© --</option>
    <!-- Ø³ÙŠØªÙ… Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ù€58 ÙˆÙ„Ø§ÙŠØ© Ù„Ø§Ø­Ù‚Ù‹Ø§ -->
  </select>

  <label for="branch">Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø£Ù‚Ø±Ø¨:</label>
  <select id="branch" name="branch" required>
    <option value="">-- Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ø¹ --</option>
    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„ÙØ±ÙˆØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø­Ø³Ø¨ Ø§Ù„ÙˆÙƒØ§Ù„Ø© -->
  </select>

  <div class="step-buttons">
    <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
    <button type="button" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
  </div>

<!-- Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø§ÙÙ‚ÙŠÙ† -->
<div class="form-step" id="step4" style="display: none;">
  <h2>Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙˆÙ†</h2>
  <div id="companionsList"></div>

  <button type="button" onclick="addCompanion()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø§ÙÙ‚</button>

  <div class="step-buttons">
    <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
    <button type="button" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
  </div>
</div>

<!-- Ø§Ù„Ø®Ø·ÙˆØ© 5: ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
<div class="step" id="step5">
  <h2>Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ·</h2>
  <div style="max-height: 200px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
    <p>ÙŠØ±Ø¬Ù‰ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¨Ø¹Ù†Ø§ÙŠØ©...</p>
    <!-- ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Øµ from about.html Ù‡Ù†Ø§ -->
  </div>

  <label>
    <input type="checkbox" id="agree" required> Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…
  </label>

  <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
  <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
</div>

</div>Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù‡Ù†Ø§ -->
  </form>  <div id="companions"></div>  <script>

<script>
document.getElementById("umrahForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const form = e.target;
  const formData = new FormData(form);
  formData.append("companionCount", companionCount);

  fetch("https://script.google.com/macros/s/PASTE_YOUR_DEPLOYED_URL_HERE/exec", {
    method: "POST",
    body: formData
  })
  .then(res => res.text())
  .then(response => {
    alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªØ³Ø¬ÙŠÙ„ÙƒÙ… Ø¨Ù†Ø¬Ø§Ø­!");
    window.location.href = "index.html"; // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡
  })
  .catch(err => {
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: " + err.message);
  });
});
</script>

<script>
// ğŸ”„ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø®Ø·ÙˆØ§Øª
let currentStep = 0;
const steps = document.querySelectorAll('.step');

function showStep(index) {
  steps.forEach((step, i) => {
    step.style.display = i === index ? 'block' : 'none';
  });
}

function nextStep() {
  const inputs = steps[currentStep].querySelectorAll('input, select');
  for (let input of inputs) {
    if (input.hasAttribute('required') && !input.value) {
      alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
      return;
    }
  }
  if (currentStep < steps.length - 1) {
    currentStep++;
    showStep(currentStep);
  }
}

function prevStep() {
  if (currentStep > 0) {
    currentStep--;
    showStep(currentStep);
  }
}

showStep(currentStep);

// ğŸ¢ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ø³Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø© Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· + Ø¹Ø±Ø¶ Ø§Ù„ÙØ±ÙˆØ¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
const urlParams = new URLSearchParams(window.location.search);
const agency = urlParams.get("agency");
document.getElementById("agencyName").value = agency || '';

const branches = {
  "Ø§Ù„Ù†Ø¬Ø§Ø­": ["Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", "Ø¨Ø±Ø¬ Ø§Ù„ÙƒÙŠÙØ§Ù†", "Ø¨Ø§Ø¨ Ø§Ù„Ø²ÙˆØ§Ø±", "ÙˆÙ‡Ø±Ø§Ù†", "Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©"],
  "ØµÙØ§ ÙˆÙ…Ø±ÙˆØ©": ["ØªÙŠØ§Ø±Øª", "ØªÙŠØ³Ù…Ø³ÙŠÙ„Øª", "ØºÙ„ÙŠØ²Ø§Ù†", "Ø³ÙŠØ¯ÙŠ Ø¨Ù„Ø¹Ø¨Ø§Ø³", "Ø§Ù„Ø´Ù„Ù"],
  "Ø§Ù„Ø¨ÙŠØª Ø§Ù„Ø¬Ù…ÙŠÙ„": ["Ø¨ÙˆÙØ§Ø±ÙŠÙƒ", "Ø§Ù„Ø¨Ù„ÙŠØ¯Ø©", "Ø§Ù„Ø£Ø¨ÙŠØ§Ø±", "Ø¨Ø§Ø¨ Ø§Ù„Ø²ÙˆØ§Ø±", "Ø¨ÙˆÙ…Ø±Ø¯Ø§Ø³"]
};

const branchSelect = document.getElementById("branch");
if (agency && branches[agency]) {
  branches[agency].forEach(branch => {
    const option = document.createElement("option");
    option.value = branch;
    option.textContent = branch;
    branchSelect.appendChild(option);
  });
}

// ğŸ§’ Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø§ÙÙ‚ÙŠÙ†
let companionCount = 0;
function addCompanion() {
  companionCount++;
  const container = document.getElementById("companionsContainer");
  const div = document.createElement("div");
  div.innerHTML = `
    <fieldset style="margin: 10px 0; border: 1px solid #ccc; padding: 10px;">
      <legend>Ø§Ù„Ù…Ø±Ø§ÙÙ‚ ${companionCount}</legend>
      <label>Ø§Ù„ØµÙØ©:</label>
      <select name="companionRelation${companionCount}" required>
        <option value="">Ø§Ø®ØªØ±</option>
        <option value="Ø²ÙˆØ¬Ø©">Ø²ÙˆØ¬Ø©</option>
        <option value="Ø§Ø¨Ù†">Ø§Ø¨Ù†</option>
        <option value="ØµØ¯ÙŠÙ‚">ØµØ¯ÙŠÙ‚</option>
        <option value="Ø·ÙÙ„ Ø£Ù‚Ù„ Ù…Ù† Ø³Ù†ØªÙŠÙ†">Ø·ÙÙ„ Ø£Ù‚Ù„ Ù…Ù† Ø³Ù†ØªÙŠÙ†</option>
        <option value="Ø·ÙÙ„ Ø¨ÙŠÙ† 2 Ùˆ12 Ø³Ù†Ø©">Ø·ÙÙ„ Ø¨ÙŠÙ† 2 Ùˆ12 Ø³Ù†Ø©</option>
      </select>
      <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label>
      <input type="text" name="companionName${companionCount}" required>
      <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:</label>
      <input type="date" name="companionBirth${companionCount}" required>
      <label>ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø¬ÙˆØ§Ø² Ø§Ù„Ø³ÙØ±:</label>
      <input type="date" name="companionPassport${companionCount}" required>
      <button type="button" onclick="this.parentElement.remove()">ğŸ—‘ï¸ Ø¥Ø²Ø§Ù„Ø©</button>
    </fieldset>
  `;
  container.appendChild(div);
}
</script>

    // Ù‡Ù†Ø§ ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù…Ù† Ù…Ù„Ù Ø®Ø§Ø±Ø¬ÙŠ Ø£Ùˆ Ø¨Ù†Ø§Ø¡Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø©
    // Ù„ØªØ¨Ø³ÙŠØ· Ø§Ù„Ù…Ø«Ø§Ù„ Ù†Ø¹ØªØ¨Ø± Ø£Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù…ÙˆØ¬ÙˆØ¯ ÙˆÙ…ÙÙ‡ÙŠØ£
  </script></body>
</html>