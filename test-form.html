<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ØªØ§Ø¨Ø¹Ø© Ø·Ù„Ø¨ Ø§Ù„Ø¹Ù…Ø±Ø© + Ø§Ù„Ø¹Ø±ÙˆØ¶</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
  font-family:Tajawal,Arial;
  margin:0;
  background:url("https://i.supaimg.com/c5d71aa9-c2b3-4263-8bd6-2f800145c063.jpg") center/cover fixed no-repeat;
}
#menuBtn{width:30px;margin:15px;cursor:pointer}
#menuBtn span{display:block;height:3px;background:#000;margin:6px 0;border-radius:2px}

#sideMenu{
  position:fixed;top:0;right:-260px;width:260px;height:100%;
  background:#8b0000;padding-top:60px;transition:.3s;z-index:10000
}
#sideMenu a{display:block;padding:15px;color:#fff;text-decoration:none}
#sideMenu a:hover{background:rgba(255,255,255,.2)}

#overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:9000}

.container{
  max-width:650px;background:rgba(255,255,255,.9);
  margin:20px auto;padding:20px;border-radius:16px
}

h2{text-align:center;color:#8b0000}
button,input,select{
  width:100%;padding:10px;margin-top:8px;
  border-radius:8px;border:1px solid #ccc
}
button{background:#8b0000;color:#fff;cursor:pointer}

.offer-card{
  background:#fff;border-radius:16px;padding:16px;margin-top:18px;
  border:1px solid #eee;box-shadow:0 6px 20px rgba(0,0,0,.05)
}
.offer-header{display:flex;align-items:center;gap:10px}
.offer-logo{width:42px;height:42px;object-fit:contain}
.offer-title{font-size:18px;font-weight:800;color:#8b0000;margin:8px 0}
.offer-info{display:grid;grid-template-columns:1fr 1fr;gap:6px;font-size:14px}
.offer-price{margin-top:10px;background:#f8f4ef;padding:10px;border-radius:12px;font-weight:800;text-align:center}

#filters{display:grid;grid-template-columns:1fr 1fr;gap:10px}

#modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:9999}
#modalBox{
  background:#fff;max-width:360px;width:90%;
  margin:8% auto;padding:16px;border-radius:14px;
  max-height:75vh;overflow:auto;text-align:center
}

.whatsapp-top{
  position:fixed;top:15px;left:15px;width:55px;height:55px;
  background:#25D366;color:#fff;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:30px;z-index:11000
}
</style>
</head>

<body>

<a href="https://wa.me/213674141379" target="_blank" class="whatsapp-top">
<i class="fab fa-whatsapp"></i>
</a>

<div id="menuBtn"><span></span><span></span><span></span></div>
<div id="overlay"></div>

<nav id="sideMenu">
<a href="offers.html">ğŸ•‹ Ø¹Ø±ÙˆØ¶ Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©</a>
<a href="recherche-oeffer.html">ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¹Ø±Ø¶</a>
</nav>

<div class="container">

<h2>ğŸ•‹ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ù…Ø±Ø© Ø§Ù„Ù…ØªÙˆÙØ±Ø©</h2>

<div id="filters">
<select id="filterAgency"><option value="">ğŸ¢ ÙƒÙ„ Ø§Ù„ÙˆÙƒØ§Ù„Ø§Øª</option></select>
<select id="filterAirport"><option value="">ğŸ›« ÙƒÙ„ Ø§Ù„Ù…Ø·Ø§Ø±Ø§Øª</option></select>
</div>

<div id="offers">â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶...</div>
</div>

<!-- Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
<div id="modal">
<div id="modalBox">

<img id="m_logo" style="width:90px;display:none;margin:auto">

<h3 id="m_offer"></h3>
<p id="m_agency"></p>
<p id="m_wilaya"></p>
<p id="m_commune"></p>
<p id="m_type"></p>
<p id="m_date"></p>
<p id="m_airport"></p>
<p id="m_hotel"></p>
<p id="m_prices"></p>

<button onclick="closeModal()" style="background:#777">Ø¥ØºÙ„Ø§Ù‚</button>
</div>
</div>

<script>
const OFFERS_API="https://script.google.com/macros/s/AKfycbzHhKu-K6pxKLRe8b1KpiLfI39i9p0lsmUpuNBL62C1K8yozuFEnu3Pr8kRNUedFi42Tg/exec";

menuBtn.onclick=()=>{sideMenu.style.right="0";overlay.style.display="block"};
overlay.onclick=()=>{sideMenu.style.right="-260px";overlay.style.display="none"};

let offersData=[];

fetch(OFFERS_API)
.then(r=>r.json())
.then(data=>{
  offersData=data;
  renderOffers(data);

  [...new Set(data.map(o=>o.agency || o["Ø§Ø³Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø©"]))].forEach(v=>{
    if(v) filterAgency.add(new Option(v,v));
  });
  [...new Set(data.map(o=>o.airport || o["Ù…Ø·Ø§Ø± Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹"]))].forEach(v=>{
    if(v) filterAirport.add(new Option(v,v));
  });
});

function renderOffers(data){
  offers.innerHTML="";
  data.forEach(o=>{
    const d=document.createElement("div");
    d.className="offer-card";
    d.innerHTML=`
      <div class="offer-header">
        <img src="${o.logo || o["Ø´Ø¹Ø§Ø± Ø§Ù„ÙˆÙƒØ§Ù„Ø©"] || ""}" class="offer-logo">
        <strong>${o.agency || o["Ø§Ø³Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø©"] || ""}</strong>
      </div>
      <div class="offer-title">${o.offer || o["Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¶"] || ""}</div>
      <div class="offer-info">
        <span>ğŸ“… ${o.date || o["ØªØ§Ø±ÙŠØ® Ø§Ù„Ø±Ø­Ù„Ø©"] || ""}</span>
        <span>ğŸ›« ${o.airport || o["Ù…Ø·Ø§Ø± Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹"] || ""}</span>
      </div>
      <div class="offer-price">ğŸ’° ${o.group || o["ØºØ±ÙØ© Ø¬Ù…Ø§Ø¹ÙŠØ©"] || "â€”"} Ø¯Ø¬</div>
      <button onclick='openModal(${JSON.stringify(o)})'>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶</button>
    `;
    offers.appendChild(d);
  });
}

function openModal(o){
  const logo = o.logo || o["Ø´Ø¹Ø§Ø± Ø§Ù„ÙˆÙƒØ§Ù„Ø©"] || "";
  m_logo.src = logo;
  m_logo.style.display = logo ? "block" : "none";

  m_offer.innerText = "ğŸ•‹ " + (o.offer || o["Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¶"] || "â€”");
  m_agency.innerText = "ğŸ¢ Ø§Ù„ÙˆÙƒØ§Ù„Ø©: " + (o.agency || o["Ø§Ø³Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø©"] || "â€”");
  m_wilaya.innerText = "ğŸ“ Ø§Ù„ÙˆÙ„Ø§ÙŠØ©: " + (o.wilaya || o["Ø§Ù„ÙˆÙ„Ø§ÙŠØ©"] || "â€”");
  m_commune.innerText = "ğŸ˜ï¸ Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©: " + (o.commune || o["Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©"] || "â€”");
  m_type.innerText = "âœˆï¸ Ù†ÙˆØ¹ Ø§Ù„Ø±Ø­Ù„Ø©: " + (o.type || o["Ù†ÙˆØ¹ Ø§Ù„Ø±Ø­Ù„Ø©"] || "â€”");
  m_date.innerText = "ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø±Ø­Ù„Ø©: " + (o.date || o["ØªØ§Ø±ÙŠØ® Ø§Ù„Ø±Ø­Ù„Ø©"] || "â€”");
  m_airport.innerText = "ğŸ›« Ù…Ø·Ø§Ø± Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹: " + (o.airport || o["Ù…Ø·Ø§Ø± Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹"] || "â€”");
  m_hotel.innerText = "ğŸ¨ Ø§Ù„ÙÙ†Ø¯Ù‚: " + (o.hotel || o["Ø§Ø³Ù… Ø§Ù„ÙÙ†Ø¯Ù‚"] || "â€”");

  m_prices.innerHTML=`
    Ø¬Ù…Ø§Ø¹ÙŠØ©: ${o.group || o["ØºØ±ÙØ© Ø¬Ù…Ø§Ø¹ÙŠØ©"] || "-"}<br>
    Ø®Ù…Ø§Ø³ÙŠØ©: ${o.five || o["ØºØ±ÙØ© Ø®Ù…Ø§Ø³ÙŠØ©"] || "-"}<br>
    Ø±Ø¨Ø§Ø¹ÙŠØ©: ${o.four || o["ØºØ±ÙØ© Ø±Ø¨Ø§Ø¹ÙŠØ©"] || "-"}<br>
    Ø«Ù„Ø§Ø«ÙŠØ©: ${o.three || o["ØºØ±ÙØ© Ø«Ù„Ø§Ø«ÙŠØ©"] || "-"}<br>
    Ø«Ù†Ø§Ø¦ÙŠØ©: ${o.two || o["ØºØ±ÙØ© Ø«Ù†Ø§Ø¦ÙŠØ©"] || "-"}
  `;

  modal.style.display="block";
}

function closeModal(){modal.style.display="none"}

filterAgency.onchange = filterAirport.onchange = ()=>{
  renderOffers(offersData.filter(o=>{
    if(filterAgency.value && (o.agency || o["Ø§Ø³Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø©"]) !== filterAgency.value) return false;
    if(filterAirport.value && (o.airport || o["Ù…Ø·Ø§Ø± Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹"]) !== filterAirport.value) return false;
    return true;
  }));
};
</script>

</body>
</html>