
<!DOCTYPE html>  <html lang="ar" dir="rtl">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<title>Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¹Ù…Ø±Ø©</title>  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"> 
 <style>  
 
  
/* ====== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© ====== */
body{
  font-family:Tajawal,Arial;
  margin:0;
  padding-top:60px; /* Ù…Ù‡Ù… Ù„Ø£Ù† Ø§Ù„Ù‡ÙŠØ¯Ø± Ø«Ø§Ø¨Øª */
  background:
    linear-gradient(rgba(0,0,0,.45),rgba(0,0,0,.45)),
    url("https://i.supaimg.com/c5d71aa9-c2b3-4263-8bd6-2f800145c063.jpg")
    center/cover fixed no-repeat;
}
  
header{  
  height:60px;  
  background:#8b0000;  
  color:#fff;  
  display:flex;  
  align-items:center;  
  padding:0 15px;  
}  
 
  
.menu-btn{font-size:26px;cursor:pointer}  
header h1{flex:1;text-align:center;font-size:18px;margin:0}  
  
.whatsapp-top{  
  position:fixed;  
top:60px;                    
  left:12px;  
  width:48px;  
  height:48px;  
  background:#25D366;  
  color:#fff;  
  border-radius:50%;  
  display:flex;  
  align-items:center;  
  justify-content:center;  
  font-size:28px;  
  z-index:13000;  
}  
  
#sideMenu{  
  position:fixed;  
  top:0;right:-260px;  
  width:260px;height:100%;  
  background:#8b0000;  
  padding-top:70px;  
  transition:.3s;  
  z-index:10000  
}  
#sideMenu a{  
  display:block;  
  padding:14px 18px;  
  color:#fff;  
  text-decoration:none;  
}  
#overlay{  
  display:none;  
  position:fixed;  
  inset:0;  
  background:rgba(0,0,0,.6);  
  z-index:9000  
}  
  
.container{  
  max-width:1200px;  
  margin:25px auto;  
  background:rgba(255,255,255,.60);  
  padding:20px;  
  border-radius:20px;  
}  
  
.filters{  
  display:grid;  
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));  
  gap:10px;  
  margin-bottom:20px  
}  
select{padding:8px;border-radius:8px}  
  
.airport-group{margin-bottom:30px}  
.airport-title{font-weight:900;color:#8b0000;margin-bottom:10px}  
.airport-row{display:flex;gap:16px;overflow-x:auto}  
  
.card{
  position:relative;
  min-width:300px;
  background:#fff;
  border-radius:22px;
  padding:40px 16px 16px; /* ÙØ±Ø§Øº Ø¹Ù„ÙˆÙŠ Ù„Ù„Ø±Ø£Ø³ */
  box-shadow:0 10px 28px rgba(0,0,0,.12);
}

.card-header{
 padding:19px 14px 10px; 
  
  top:-18px;
  left:16px;
  right:16px;

  background:rgba(255,255,255,.95);
  border-radius:22px;
  padding:12px 14px;

  display:flex;
  align-items:center;
  gap:12px;

  box-shadow:0 6px 18px rgba(0,0,0,.18);
}

.card-header img{
  width:46px;
  height:46px;
  object-fit:contain;
  border-radius:10px;
  background:#fff;
}


.card-header strong{
  font-size:15px;
  color:#222;
}

.card-header strong{
  font-size:15px;
  color:#222;
}

.card-header small{
  font-size:13px;
  color:#777;
}


/* Ø¥Ø·Ø§Ø± Ø´Ø¹Ø§Ø± Ø§Ù„Ø·ÙŠØ±Ø§Ù† */
.airline-card{
  background:#fff;        /* âœ”ï¸ Ø§Ù„Ø®Ù„ÙÙŠØ© ØªØ¨Ù‚Ù‰ Ø¯Ø§Ø¦Ù…Ù‹Ø§ */
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØµÙˆØ±Ø© */
.airline-card.empty::after{
  content:"â€”";
  font-size:40px;
  color:#bbb;
  line-height:1;
}
/* ====== Ø§Ù„Ø´Ø¹Ø§Ø± (ÙˆØ³Ø·) ====== */
.logo-center{
  justify-self:center;
  cursor:pointer;
}

.logo{
  height:30px;
  width:auto;
  display:block;
}



.price{  
  margin-top:10px;  
  background:#f8f4ef;  
  padding:10px;  
  border-radius:10px;  
  text-align:center;  
  font-weight:900;  
  color:#8b0000  
}  
  
.card-actions{  
  display:flex;  
  gap:8px;  
  margin-top:10px;  
}  
.card-actions button{  
  flex:1;  
  padding:10px;  
  border:none;  
  border-radius:10px;  
  background:#8b0000;  
  color:#fff;  
  cursor:pointer;  
  font-size:14px;  
}  



  
/* Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ */  
.wa-below{  
  margin:0 auto 10px;  
  width:48px;  
  height:48px;  
  border-radius:50%;  
  border:none;  
  background:#25D366;  
  display:flex;  
  align-items:center;  
  justify-content:center;  
  cursor:pointer;  
}  
  
.wa-below i{  
  color:#fff;  
  font-size:24px;  
}  
  
#detailsModal,#registerModal{  
  display:none;  
  position:fixed;  
  inset:0;  
  background:rgba(0,0,0,.6);  
  z-index:20000;  
  align-items:center;  
  justify-content:center;  
}  
  
.modal-box{  
  background:#fff;  
  width:90%;  
  max-width:420px;  
  padding:20px;  
  border-radius:18px;  
}  
.modal-box input{  
  width:100%;  
  padding:10px;  
  margin:6px 0;  
  border-radius:8px;  
  border:1px solid #ccc;  
}  
.card-info{  
  margin-top:8px;  
  font-size:14px;  
  line-height:1.9;  
}  
  
.visitor-box i{  
  font-size:26px;  
  color:#1e90ff;  
}  
  
.visitor-box span{  
color:#fff;  
  font-size:22px;  
  font-weight:700;  
}  
  
.visitor-box small{  
color:#fff;  
  font-size:13px;  
  opacity:.85;  
}  
 .visitor-box{
  display:flex;
  align-items:center;
  gap:8px;
  background:rgba(255,255,255,.15);
  backdrop-filter:blur(6px);
  color:#fff;
  padding:12px 18px;
  border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,.15);
}

  
header h1{  
  flex:1;  
  text-align:center;  
  font-size:18px;  
  margin:0;  
}  



/* ====== Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ ====== */
.top-bar{
  position:fixed;
  top:0;
  right:0;
  left:0;
  height:60px;
  background:#8b0000;
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  padding:0 15px;
  z-index:15000;
}
#registerModal{
  display:none;
  position:fixed;
}

/* ====== Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© (ÙŠÙ…ÙŠÙ†) ====== */
.menu-btn{
  font-size:30px;
  cursor:pointer;
  color:#fff;
  justify-self:start;
}


/* ====== Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© ====== */
#sideMenu{
  position:fixed;
  top:0;
  right:-260px;
  width:260px;
  height:100%;
  background:#8b0000;
  padding-top:70px;
  transition:.3s;
  z-index:10000;
}

#sideMenu a{
  display:block;
  padding:14px 18px;
  color:#fff;
  text-decoration:none;
}

/* ====== ØºØ·Ø§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ====== */
#overlay{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  z-index:9000;
}

/* ====== Ø§Ù„Ø­Ø§ÙˆÙŠØ© ====== */
.container{
  max-width:1200px;
  margin:25px auto;
  background:rgba(255,255,255,.60);
  padding:20px;
  border-radius:20px;
}

/* ====== Ù†Ø§ÙØ°Ø© ØªØ±Ø­ÙŠØ¨ÙŠØ© ====== */
.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  z-index:20000;
  align-items:center;
  justify-content:center;
}

.modal-box{
  background:#fff;
  padding:25px;
  border-radius:18px;
  max-width:420px;
  text-align:center;
}

.modal-box h2{
  margin-top:0;
  color:#8b0000;
}

.modal-box button{
  margin-top:15px;
  padding:10px 20px;
  border:none;
  background:#8b0000;
  color:#fff;
  border-radius:10px;
  cursor:pointer;
}

/* ====== Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù‡Ø§ØªÙ ====== */



</style>


</head>  <body>  <a href="https://wa.me/213674141379" target="_blank" class="whatsapp-top">  
<i class="fab fa-whatsapp"></i>  
</a>  
 

<header class="top-bar">
  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (ÙŠÙ…ÙŠÙ†) -->
  <div class="menu-btn" onclick="openMenu()">â˜°</div>

  <!-- Ø§Ù„Ø´Ø¹Ø§Ø± (ÙˆØ³Ø·) -->
  <div class="logo-center" onclick="openWelcome()">
   <img
  src="https://res.cloudinary.com/dmc36nijl/image/upload/v1769337506/ei_1769337332026-removebg-preview_1_y2xsij.png"
  alt="Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©"
  class="logo"
  onclick="openWelcome()"
  style="cursor:pointer"
>

  </div>

  <!-- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± (ÙŠØ³Ø§Ø±) -->
  <div class="visitor-box">
    <i class="fa-solid fa-users"></i>
    <div>
      <span id="visitors">0</span>
      <small>Ø²Ø§Ø¦Ø±</small>
    </div>
  </div>
</header>
 <nav id="sideMenu">  
<a href="results-gen.html">ğŸ•‹ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ø§Ù…Ø©</a>  
<a href="recherche-oeffer.html">ğŸ“© Ø·Ù„Ø¨ Ø¹Ø±Ø¶ Ø¹Ù…Ø±Ø©</a>  
<a href="recherche-n.html">ğŸ‘¤ ØµÙØ­ØªÙŠ Ø§Ù„Ø®Ø§ØµØ©</a>  
</nav>  
<div id="overlay" onclick="closeMenu()"></div>  <div class="container">  <div class="filters">  
<select id="fAgency"><option value="">ğŸ¢ ÙƒÙ„ Ø§Ù„ÙˆÙƒØ§Ù„Ø§Øª</option></select>  
<select id="fState"><option value="">ğŸ“ ÙƒÙ„ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª</option></select>  
<select id="fDate"><option value="">ğŸ“… ÙƒÙ„ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®</option></select>  
</div> 
  <div id="offers">â³ Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶...</div>  
</div>  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ --> 
  <div id="detailsModal" onclick="closeDetails()">  
  <div class="modal-box" onclick="event.stopPropagation()">  
    <button onclick="closeDetails()"  
      style="position:absolute;top:10px;left:10px;  
      background:#8b0000;color:#fff;border:none;  
      border-radius:50%;width:32px;height:32px;  
      font-size:18px;cursor:pointer">Ã—</button>  <h3>ğŸ•‹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶</h3>  
<div id="detailsContent"></div>

  </div>  
</div> 
  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
  <div id="registerModal"
    
     style="display:none;
     position:fixed;
     inset:0;
     background:rgba(0,0,0,.6);
     z-index:25000;
     
     align-items:center;
     justify-content:center;">

  <div class="modal-box" onclick="event.stopPropagation()">
    <h3>ğŸ“© ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ø§Ù„Ø¹Ø±Ø¶</h3>

    <input id="cFirst" placeholder="Ø§Ù„Ø§Ø³Ù…">
    <input id="cLast" placeholder="Ø§Ù„Ù„Ù‚Ø¨">
    <input id="cPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">

    <button onclick="sendRegister()">Ø¥Ø±Ø³Ø§Ù„</button>

    <button onclick="closeRegisterModal()"
      style="width:100%;padding:10px;margin-top:6px">
      Ø¥Ù„ØºØ§Ø¡
    </button>
  </div>
</div>

</div>  <script>  
const OFFERS_API="https://script.google.com/macros/s/AKfycbwN-Mgn61HDqdCD2_shOx3nRAcW-O8GxquhSpxaSX0Az00W1W_48lVFCowDqF41ZN_7dQ/exec";  
  
let offersData=[], selectedOffer=null;  
  
const fAgency=document.getElementById("fAgency");  
const fState=document.getElementById("fState");  
const fDate=document.getElementById("fDate");  
const offers=document.getElementById("offers");  
  
function formatDate(d){  
  return d ? new Date(d).toLocaleDateString("ar-DZ") : "-";  
}  
  
fetch(OFFERS_API).then(r=>r.json()).then(data=>{  
  offersData=data;  
  fillFilters();  
  render();  
});  
  
function fillFilters(){  
  const A=new Set(),S=new Set(),D=new Set();  
  offersData.forEach(o=>{  
    if(o.agency) A.add(o.agency);  
    if(o.state) S.add(o.state);  
    if(o.date) D.add(formatDate(o.date));  
  });  
  A.forEach(v=>fAgency.add(new Option(v,v)));  
  S.forEach(v=>fState.add(new Option(v,v)));  
  D.forEach(v=>fDate.add(new Option(v,v)));  
}  
  
function render(){  
  offers.innerHTML="";  
  let list=[...offersData];  
  
  if(fAgency.value) list=list.filter(o=>o.agency===fAgency.value);  
  if(fState.value) list=list.filter(o=>o.state===fState.value);  
  if(fDate.value) list=list.filter(o=>formatDate(o.date)===fDate.value);  
  
  
  const grouped={};  
  list.forEach(o=>{  
    const ap=o.airport||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯";  
    if(!grouped[ap]) grouped[ap]=[];  
    grouped[ap].push(o);  
  });  
  
  Object.keys(grouped).forEach(ap=>{  
    const g=document.createElement("div");  
    // ØªØ±ØªÙŠØ¨ Ø±Ø­Ù„Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ù…Ø·Ø§Ø± Ø­Ø³Ø¨ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ (Ø§Ù„Ø£Ù‚Ø±Ø¨ Ø£ÙˆÙ„Ø§Ù‹)  
grouped[ap].sort((a, b) => new Date(a.date) - new Date(b.date));  
  
    g.className="airport-group";  
    g.innerHTML=`<div class="airport-title">âœˆï¸ ${ap}</div>`;  
    const r=document.createElement("div");  
    r.className="airport-row";  
  
    grouped[ap].forEach(o=>{  
      const c=document.createElement("div");  
      c.className="card";  
      c.innerHTML=`  
          
  
 

  <!-- Ø´Ø¹Ø§Ø± Ø´Ø±ÙƒØ© Ø§Ù„Ø·ÙŠØ±Ø§Ù† (Ø¹Ù†ØµØ± Ù…Ø³ØªÙ‚Ù„) -->
  <div class="airline-card ${!o.airlineLogo ? 'empty' : ''}">
    ${
      o.airlineLogo
        ? `<img src="${o.airlineLogo}"
               onerror="this.parentNode.classList.add('empty');this.remove()">`
        : ``
    }
  </div>

  <!-- Ø±Ø£Ø³ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© -->
  <div class="card-header">
    <img src="${o.logo || ''}" onerror="this.style.display='none'">
    <div>
      <strong>${o.offer}</strong><br>
      <small>${o.agency} â€“ ${o.state} ğŸ“</small>
    </div>
  </div>

  <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© -->


  <!-- Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ -->
  <button
    class="wa-below"
    onclick='openWaModal(${JSON.stringify(o)})'
    title="ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨">
    <i class="fab fa-whatsapp"></i>
  </button>
  </div>


  <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ -->  
  <div class="card-info">  
    <div>ğŸ“… Ø§Ù„Ø§Ù†Ø·Ù„Ø§Ù‚ Ø¨ØªØ§Ø±ÙŠØ® ${formatDate(o.date)}</div>  
    <div>ğŸ¨ Ø§Ù„Ø£Ù‚Ø§Ù…Ø© ÙÙŠ ÙÙ†Ø¯Ù‚ ${o.hotel || "-"}</div>  
    <div>â±ï¸ Ù…Ø¯Ø© Ø§Ù„Ø±Ø­Ù„Ø©: ${o.duration || "-"}</div>  
    <div>ğŸ›« Ù…Ø³Ø§Ø± Ø§Ù„Ø±Ø­Ù„Ø©: ${o.flight || "-"}</div>  
  </div>  
  
  <!-- Ø§Ù„Ø³Ø¹Ø± -->  
  <div class="price">ğŸ’° ${o.group} Ø¯Ø¬</div>  
  
  <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->  
        <div class="card-actions">  
          <button onclick='openDetails(${JSON.stringify(o)})'>â„¹ï¸ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>  
          <button onclick='shareOffer(${JSON.stringify(o)})'>ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ©</button>  
          <button onclick='openRegister(${JSON.stringify(o)})'>ğŸ“© ØªØ³Ø¬ÙŠÙ„</button>  
    
  
  
        </div>  
      `;  
      r.appendChild(c);  
    });  
  
    g.appendChild(r);  
    offers.appendChild(g);  
  });  
}  
  
fAgency.onchange=render;  
fState.onchange=render;  
fDate.onchange=render;  
  
function openDetails(o){  
detailsContent.innerHTML = `  
  <p>ğŸ•‹ <strong>Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¶:</strong> ${o.offer || "-"}</p>  
  
  <hr>  
  
  <p>ğŸ¢ <strong>Ø§Ù„ÙˆÙƒØ§Ù„Ø©:</strong> ${o.agency || "-"}</p>  
  <p>ğŸ“ <strong>Ø§Ù„ÙˆÙ„Ø§ÙŠØ©:</strong> ${o.state || "-"}</p>  
  <p>ğŸ™ï¸ <strong>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</strong> ${o.city || "-"}</p>  
  <hr>  
  <p>ğŸ“… <strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø±Ø­Ù„Ø©:</strong> ${formatDate(o.date)}</p>  
  <p>â±ï¸ <strong>Ù…Ø¯Ø© Ø§Ù„Ø±Ø­Ù„Ø©:</strong> ${o.duration || "-"}</p>  
  <p>âœˆï¸ <strong>Ù†ÙˆØ¹ Ø§Ù„Ø±Ø­Ù„Ø©:</strong> ${o.flight || "-"}</p>  
  <p>ğŸ›« <strong>Ù…Ø·Ø§Ø± Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹:</strong> ${o.airport || "-"}</p>  
  <hr>  
  <p>ğŸ¨ <strong>Ø§Ù„ÙÙ†Ø¯Ù‚:</strong> ${o.hotel || "-"}</p>  
  <hr>  
  <p>ğŸ’° <strong>Ø§Ù„Ø£Ø³Ø¹Ø§Ø±:</strong></p>  
  <p>ğŸ‘¥ Ø¬Ù…Ø§Ø¹ÙŠØ©: ${o.group || "-"} Ø¯Ø¬</p>  
  <p>ğŸ›ï¸ Ø®Ù…Ø§Ø³ÙŠØ©: ${o.five || "-"} Ø¯Ø¬</p>  
  <p>ğŸ›ï¸ Ø±Ø¨Ø§Ø¹ÙŠØ©: ${o.four || "-"} Ø¯Ø¬</p>  
  <p>ğŸ›ï¸ Ø«Ù„Ø§Ø«ÙŠØ©: ${o.three || "-"} Ø¯Ø¬</p>  
  <p>ğŸ›ï¸ Ø«Ù†Ø§Ø¦ÙŠØ©: ${o.two || "-"} Ø¯Ø¬</p>  
  
  `;  
  detailsModal.style.display="flex";  
}  
function closeDetails(){detailsModal.style.display="none";}  
  
function shareOffer(o){  
  const text=`ğŸ•‹ Ø¹Ø±Ø¶ Ø¹Ù…Ø±Ø©  
${o.offer}  
  
<div class="airline-card">  
  <img src="${o.airlineLogo || ''}"   
       onerror="this.style.display='none'">  
  <span>${o.airline || ''}</span>  
</div>  
</div>  
ğŸ¢ ${o.agency}  
âœˆï¸ ${o.airport}  
ğŸ“… ${formatDate(o.date)}  
ğŸ’° ${o.group} Ø¯Ø¬`;  
  navigator.share  
    ? navigator.share({text})  
    : window.open("https://wa.me/?text="+encodeURIComponent(text));  
}  
  


  function openRegister(o){
  selectedOffer = o;
  document.getElementById("registerModal").style.display = "flex";
}

function closeRegisterModal(){
  document.getElementById("registerModal").style.display = "none";
}

function sendRegister(){  
  if(!cFirst.value||!cLast.value||!cPhone.value){  
    alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");  
    return;  
  }  
  
  sessionStorage.setItem("umrahRegister",JSON.stringify({  
    first:cFirst.value,  
    last:cLast.value,  
    phone:cPhone.value,  
    offer:selectedOffer.offer,  
    agency:selectedOffer.agency,  
    logo:selectedOffer.logo,  
    price:selectedOffer.group  
  }));  
  
  location.href="results-fenal.html";  
}  
  
function openMenu(){sideMenu.style.right="0";overlay.style.display="block"}  
function closeMenu(){sideMenu.style.right="-260px";overlay.style.display="none"}  
  
  
let waOffer = null;  
  
// ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©  
function openWaModal(o){  
  waOffer = o;  
  document.getElementById("waModal").style.display = "flex";  
}  
  
// ØºÙ„Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©  
function closeWaModal(){  
  document.getElementById("waModal").style.display = "none";  
}  
  
// ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„  
function confirmWhatsApp(){  
  
  const first = waFirst.value.trim();  
  const last  = waLast.value.trim();  
  const phone = waPhone.value.trim();  
  
  if(!first || !last || !phone){  
    alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");  
    return;  
  }  
  
  const clientName  = first + " " + last;  
  const clientPhone = phone;  
  
  // ğŸ“ Ø±Ù‚Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø© Ù…Ù† Google Sheets  
  let agencyPhone = String(waOffer.phone || "").replace(/\D/g,"");  
  
  if(!agencyPhone){  
    alert("Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„ÙˆÙƒØ§Ù„Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±");  
    return;  
  }  
  
  if(!agencyPhone.startsWith("213")){  
    agencyPhone = "213" + agencyPhone;  
  }  
  
  // ğŸ“© Ø±Ø³Ø§Ù„Ø© ÙˆØ§ØªØ³Ø§Ø¨  
  const message = `  
Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±ÙƒØ§ØªÙ‡ ğŸŒ¿  
  
Ø£Ù†Ø§ ${clientName}  
Ø±Ù‚Ù… Ù‡Ø§ØªÙÙŠ: ${clientPhone}  
  
Ø£Ø±ØºØ¨ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ø¹Ø±Ø¶ Ø¹Ù…Ø±Ø© Ù…Ù† Ù…ÙˆÙ‚Ø¹ *Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©* ğŸ•‹  
  
â–ªï¸ Ø§Ù„ÙˆÙƒØ§Ù„Ø©: ${waOffer.agency}  
â–ªï¸ Ø§Ù„Ø¹Ø±Ø¶: ${waOffer.offer}  
â–ªï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹: ${formatDate(waOffer.date)}  
â–ªï¸ Ø§Ù„ÙÙ†Ø¯Ù‚: ${waOffer.hotel || "-"}  
â–ªï¸ Ø§Ù„Ø³Ø¹Ø±: ${waOffer.group} Ø¯Ø¬  
`;  
  
  // 1ï¸âƒ£ ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨  
  window.open(  
    "https://wa.me/" + agencyPhone + "?text=" + encodeURIComponent(message),  
    "_blank"  
  );  
  
  // 2ï¸âƒ£ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Google Sheets + Email  
  fetch(  
    "https://script.google.com/macros/s/AKfycbzvVAO9qu-bwwJxg9jOJZyzwhRQdZf-FcJCZ0Uw1FcvqFD25JT978PPerBo7EuCk2_L/exec",  
    {  
      method: "POST",  
      headers: { "Content-Type": "application/json" },  
      body: JSON.stringify({  
        agency: waOffer.agency,  
        offer: waOffer.offer,  
        date: waOffer.date,  
        hotel: waOffer.hotel,  
        price: waOffer.group,  
        agencyPhone: agencyPhone,  
        clientName: clientName,  
        clientPhone: clientPhone  
      })  
    }  
  );  
  
  closeWaModal();  
}    
  
fetch("https://script.google.com/macros/s/AKfycbzWqaWF63u80EldQZABBexMJyOdVm089qG8Uy5DlyQ1YutXusvo4ow0K09OlYvFnuug/exec", {  
  cache: "no-store"  
})  
.then(r => r.json())  
.then(d => document.getElementById("visitors").textContent = d.count);  
  

function openWelcome(){
  document.getElementById("welcomeModal").style.display="flex";
}
function closeWelcome(){
  document.getElementById("welcomeModal").style.display="none";
}

</script>  <!-- Ù†Ø§ÙØ°Ø© ÙˆØ§ØªØ³Ø§Ø¨ -->
<div id="waModal"
     onclick="closeWaModal()"
     style="
     display:none;
     position:fixed;
     inset:0;
     background:rgba(0,0,0,.6);
     z-index:30000;
    
     align-items:center;
     justify-content:center;
     ">

  <div onclick="event.stopPropagation()"
       style="
       background:#fff;
       width:90%;
       max-width:420px;
       padding:20px;
       border-radius:18px;
       ">

    <h3>ğŸ‘¤ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø±</h3>

    <input id="waFirst" placeholder="Ø§Ù„Ø§Ø³Ù…"
      style="width:100%;padding:10px;margin:6px 0">

    <input id="waLast" placeholder="Ø§Ù„Ù„Ù‚Ø¨"
      style="width:100%;padding:10px;margin:6px 0">

    <input id="waPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"
      style="width:100%;padding:10px;margin:6px 0">

    <button onclick="confirmWhatsApp()"
      style="
      width:100%;
      padding:12px;
      background:#25D366;
      color:#fff;
      border:none;
      border-radius:10px;
      margin-top:10px">
      <i class="fab fa-whatsapp"></i> Ø¥Ø±Ø³Ø§Ù„
    </button>

    <button onclick="closeWaModal()"
      style="width:100%;padding:10px;margin-top:6px">
      Ø¥Ù„ØºØ§Ø¡
    </button>

  </div>
</div>
<div id="welcomeModal" style="
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  z-index:30000;
  align-items:center;
  justify-content:center;
" onclick="closeWelcome()">

  <div style="
    background:#fff;
    padding:25px;
    border-radius:18px;
    max-width:420px;
    width:90%;
    text-align:center;
    font-family:Tajawal,Arial;
  " onclick="event.stopPropagation()">

    <h2 style="color:#8b0000;margin-top:0">
      Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨ÙƒÙ… ÙÙŠ Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø© ğŸ•‹
    </h2>

    <p>
      Ù…ÙˆÙ‚Ø¹ <b>Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©</b> ÙŠØ³Ù‡Ù‘Ù„ Ø¹Ù„ÙŠÙƒÙ… ØªØµÙØ­
      Ø£ÙØ¶Ù„ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ù…Ø±Ø© Ù…Ù† ÙˆÙƒØ§Ù„Ø§Øª <b>Ù…Ø±Ø®ØµØ© ÙˆÙ…Ø¹ØªÙ…Ø¯Ø©</b>ØŒ
      Ù…Ø¹ ØªØ³Ø¬ÙŠÙ„ Ø³Ù‡Ù„ ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ø¶Ø­Ø©.
    </p>

    <p style="font-weight:bold;color:#0b5f3c">
      Ù†ÙŠØªÙƒ ØµØ§Ø¯Ù‚Ø©â€¦ ÙˆØ§Ù„Ø·Ø±ÙŠÙ‚ Ø¹Ù„ÙŠÙ†Ø§ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡ ğŸ¤²
    </p>

    <button onclick="closeWelcome()" style="
      margin-top:15px;
      padding:10px 20px;
      border:none;
      background:#8b0000;
      color:#fff;
      border-radius:10px;
      cursor:pointer;
    ">
      Ø¥ØºÙ„Ø§Ù‚
    </button>

  </div>
</div>


 </body>  

</html>  
