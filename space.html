<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÙØ¶Ø§Ø¡ Ø§Ù„Ù…Ø¹ØªÙ…Ø± | Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©</title>

<style>
body{
  font-family:Tajawal, Tahoma;
  background:#f1f3f5;
  margin:0;
  padding:20px;
}
.box{
  max-width:700px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:12px;
  box-shadow:0 0 15px rgba(0,0,0,.1);
}
h2,h3{text-align:center}
input,select,textarea,button{
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  background:#0d6efd;
  color:#fff;
  border:none;
}
button:hover{opacity:.9}
.section{
  margin-top:25px;
  padding:15px;
  border:1px dashed #ccc;
  border-radius:10px;
}
.hidden{display:none}
.print{background:#198754}
.visa{background:#fd7e14}
.ask{background:#6f42c1}

@media print{
  input,button,select,textarea{display:none}
}
</style>
</head>

<body>

<div class="box">
<h2>ğŸ•Œ ÙØ¶Ø§Ø¡ Ø§Ù„Ù…Ø¹ØªÙ…Ø±</h2>

<!-- Ø§Ù„Ø¨Ø­Ø« -->
<div id="search">
  <label>ğŸ“± Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø³Ø¬Ù‘ÙÙ„:</label>
  <input type="tel" id="phone">
  <button onclick="search()">ğŸ” Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ</button>
</div>

<!-- Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
<div id="info" class="hidden section">
  <h3>ğŸ“„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„</h3>
  <p><b>Ø§Ù„Ø§Ø³Ù…:</b> <span id="name"></span></p>
  <p><b>Ø§Ù„Ù‡Ø§ØªÙ:</b> <span id="phoneOut"></span></p>
  <p><b>Ø§Ù„ÙˆÙƒØ§Ù„Ø©:</b> <span id="agency"></span></p>
  <p><b>Ø±Ù‚Ù… Ø§Ù„Ø¹Ø±Ø¶:</b> <span id="offer"></span></p>
  <p><b>Ø§Ù„ÙˆÙ„Ø§ÙŠØ©:</b> <span id="wilaya"></span></p>
  <p><b>Ø§Ù„ÙØ±Ø¹:</b> <span id="branch"></span></p>
  <p><b>Ù†ÙˆØ¹ Ø§Ù„ØºØ±ÙØ©:</b> <span id="room"></span></p>
  <p><b>Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙˆÙ†:</b> <span id="companions"></span></p>

  <button class="print" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
</div>

<!-- Ø§Ù„ØªØ£Ø´ÙŠØ±Ø© -->
<div id="visa" class="hidden section">
  <h3>âœˆï¸ Ø·Ù„Ø¨ ØªØ£Ø´ÙŠØ±Ø© / ØªØ°ÙƒØ±Ø©</h3>
  <select id="visaType">
    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø·Ù„Ø¨</option>
    <option>ØªØ£Ø´ÙŠØ±Ø© ÙÙ‚Ø·</option>
    <option>ØªØ°ÙƒØ±Ø© ÙÙ‚Ø·</option>
    <option>ØªØ£Ø´ÙŠØ±Ø© + ØªØ°ÙƒØ±Ø©</option>
  </select>
  <button class="visa" onclick="sendVisa()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„</button>
</div>

<!-- Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± -->
<div id="ask" class="hidden section">
  <h3>â“ Ø§Ø³ØªÙØ³Ø§Ø±</h3>
  <textarea id="question"></textarea>
  <button class="ask" onclick="sendQuestion()">ğŸ“© Ø¥Ø±Ø³Ø§Ù„</button>
</div>

</div>

<script>
const SCRIPT_URL = "Ø¶Ø¹_Ù‡Ù†Ø§_Ø±Ø§Ø¨Ø·_Ø§Ù„ÙˆÙŠØ¨_Ø¢Ø¨";

let currentPhone = "";

function search(){
  const phone = document.getElementById("phone").value.trim();
  if(!phone){alert("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ");return;}

  fetch(SCRIPT_URL+"?action=search&phone="+phone)
  .then(r=>r.json())
  .then(d=>{
    if(!d.found){alert("âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ³Ø¬ÙŠÙ„");return;}

    currentPhone = phone;
    document.getElementById("search").style.display="none";
    document.querySelectorAll(".hidden").forEach(e=>e.classList.remove("hidden"));

    document.getElementById("name").textContent = d.name;
    document.getElementById("phoneOut").textContent = phone;
    document.getElementById("agency").textContent = d.agency;
    document.getElementById("offer").textContent = d.offer;
    document.getElementById("wilaya").textContent = d.wilaya;
    document.getElementById("branch").textContent = d.branch;
    document.getElementById("room").textContent = d.room;
    document.getElementById("companions").textContent = d.companions || "â€”";
  });
}

function sendVisa(){
  const type = document.getElementById("visaType").value;
  if(!type){alert("Ø§Ø®ØªØ± Ø§Ù„Ø·Ù„Ø¨");return;}

  fetch(SCRIPT_URL,{
    method:"POST",
    body:new URLSearchParams({
      action:"visa",
      phone:currentPhone,
      type:type
    })
  }).then(()=>alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨"));
}

function sendQuestion(){
  const q = document.getElementById("question").value;
  if(!q){alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±");return;}

  fetch(SCRIPT_URL,{
    method:"POST",
    body:new URLSearchParams({
      action:"question",
      phone:currentPhone,
      question:q
    })
  }).then(()=>{
    alert("ğŸ“© ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
    document.getElementById("question").value="";
  });
}
</script>

</body>
</html>