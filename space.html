<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÙØ¶Ø§Ø¡ Ø§Ù„Ù…Ø¹ØªÙ…Ø± | Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©</title>

<style>
*{box-sizing:border-box}
body{
  font-family:'Tajawal',Tahoma,Arial,sans-serif;
  margin:0;
  background:#f2f4f8;
}

/* ===== TOP BAR ===== */
.topbar{
  background:#FFD700;
  padding:10px 16px;
  display:grid;
  grid-template-columns:40px 1fr auto;
  align-items:center;
  position:sticky;
  top:0;
  z-index:1000;
}
.menu-btn{font-size:28px;font-weight:900;cursor:pointer}
.topbar-center{text-align:center}
.topbar-center img{height:42px;display:block;margin:0 auto}
.topbar-center span{font-size:15px;font-weight:900}
.topbar-title{text-align:left;font-size:20px;font-weight:900}

/* ===== SIDEBAR ===== */
.sidebar{
  position:fixed;top:0;right:-280px;width:280px;height:100%;
  background:#fff;box-shadow:-4px 0 15px rgba(0,0,0,.3);
  transition:.3s;z-index:2000;padding-top:60px;
}
.sidebar.active{right:0}
.sidebar a{
  display:block;padding:14px 22px;text-decoration:none;
  color:#333;font-weight:bold;border-bottom:1px solid #eee;
}
.closebtn{position:absolute;top:15px;left:15px;font-size:28px;cursor:pointer}

/* ===== PAGE ===== */
.page{max-width:900px;margin:30px auto;padding:15px}
.card{
  background:#fff;padding:26px;border-radius:14px;
  box-shadow:0 6px 18px rgba(0,0,0,.15);
}
input,button{padding:14px;font-size:18px;width:100%}
button{
  background:#0d6efd;color:#fff;border:none;
  cursor:pointer;margin-top:15px
}
button:disabled{opacity:.6}

/* ===== INFO ===== */
.hint{
  margin:10px 0 20px;color:#b00020;
  font-size:16px;font-weight:bold;text-align:center
}

/* ===== LOADER ===== */
.loader{
  margin-top:20px;padding:20px;text-align:center;
  font-size:22px;font-weight:bold;color:#0d6efd;
  background:#f9f9f9;border-radius:12px;display:none
}

/* ===== RESULT ===== */
.result{margin-top:20px;font-size:18px;line-height:1.9}

/* ===== LOGOS & BADGE ===== */
.result-card{
  border:1px solid #eee;border-radius:14px;padding:20px
}
.logos{
  display:flex;justify-content:space-between;align-items:center;
  margin-bottom:15px
}
.logos img{height:50px}
.badge{
  display:inline-block;padding:6px 14px;border-radius:20px;
  font-size:14px;font-weight:bold;color:#fff;margin-bottom:15px
}
.badge.ok{background:#198754}
.badge.wait{background:#ffc107;color:#000}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
  <span class="menu-btn" onclick="openSidebar()">â˜°</span>
  <div class="topbar-center">
    <img src="https://i.ibb.co/HDMQfZKG/1766852333847-removebg-preview.png">
    <span>Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©</span>
  </div>
  <div class="topbar-title">ÙØ¶Ø§Ø¡ Ø§Ù„Ù…Ø¹ØªÙ…Ø± ğŸ§¾</div>
</div>

<!-- SIDEBAR -->
<div id="sidebar" class="sidebar">
  <span class="closebtn" onclick="closeSidebar()">Ã—</span>
  <a href="index.html">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="offers.html">ğŸ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ù…Ø±Ø©</a>
  <a href="client.html">ğŸ§¾ ÙØ¶Ø§Ø¡ Ø§Ù„Ù…Ø¹ØªÙ…Ø±</a>
  <a href="upload-passport.html">ğŸ“¤ ØªØ­Ù…ÙŠÙ„ Ø¬ÙˆØ§Ø² Ø§Ù„Ø³ÙØ±</a>
  <a href="contact.html">ğŸ“ Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
  <a href="about.html">â” Ù…Ù† Ù†Ø­Ù†</a>
</div>

<!-- CONTENT -->
<div class="page">
  <div class="card">
    <h3 style="text-align:center;font-size:26px">ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¹ØªÙ…Ø±</h3>
    <div class="hint">Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø¯ÙˆÙ† ØµÙØ±</div>

    <input id="phone" type="tel" value="0"
      onfocus="fixZero(this)" oninput="fixZero(this)">

    <button id="searchBtn" onclick="search()">Ø¨Ø­Ø«</button>

    <div id="loader" class="loader"></div>
    <div id="result" class="result"></div>
  </div>
</div>

<script>
const webAppUrl = "PUT_YOUR_GOOGLE_SCRIPT_URL_HERE";
const sidebar = document.getElementById("sidebar");
const loader = document.getElementById("loader");
const result = document.getElementById("result");
const searchBtn = document.getElementById("searchBtn");

// Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
const mainLogo = "https://i.ibb.co/HDMQfZKG/1766852333847-removebg-preview.png";

// Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙˆÙƒØ§Ù„Ø§Øª
const agencyLogos = {
  "ÙˆÙƒØ§Ù„Ø© ØªÙ‚Ø±Øª Ù„Ù„Ø³ÙŠØ§Ø­Ø© Ùˆ Ø³ÙØ±": "https://i.ibb.co/XXXX/toqert.png",
  "ÙˆÙƒØ§Ù„Ø© Ø§Ù„Ø³Ù‚ÙŠÙØ© Ù„Ù„Ø³ÙŠØ§Ø­Ø© Ùˆ Ø³ÙØ±": "https://i.ibb.co/XXXX/saqifa.png",
  "ÙˆÙƒØ§Ù„Ø© Ø§Ù„Ø§Ù†Ø³ÙŠØ© Ù„Ù„Ø³ÙŠØ§Ø­Ø© Ùˆ Ø³ÙØ±": "https://i.ibb.co/XXXX/insia.png"
};

function openSidebar(){sidebar.classList.add("active")}
function closeSidebar(){sidebar.classList.remove("active")}

function fixZero(i){
  i.value=i.value.replace(/[^0-9]/g,"");
  if(!i.value.startsWith("0")) i.value="0";
}
function preparePhone(p){
  p=p.replace(/\D/g,"");
  if(p.startsWith("0")) p=p.slice(1);
  if(p.startsWith("213")) p=p.slice(3);
  return p;
}

const adhkar=["Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡","Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡","Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡","Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡","Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±"];
let timer=null;

function getBadge(status){
  if(status==="confirmed") return `<span class="badge ok">âœ”ï¸ Ù…Ù„Ù Ù…Ø¤ÙƒØ¯</span>`;
  return `<span class="badge wait">â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</span>`;
}

function search(){
 const phone=preparePhone(phoneInput.value=document.getElementById("phone").value);
 if(phone.length<9){alert("Ø±Ù‚Ù… ØºÙŠØ± ØµØ­ÙŠØ­");return}

 result.innerHTML="";
 loader.style.display="block";
 searchBtn.disabled=true;

 let i=0;
 loader.innerText="â³ "+adhkar[0];
 timer=setInterval(()=>loader.innerText="â³ "+adhkar[i++%adhkar.length],1000);

 fetch(webAppUrl+"?phone="+phone)
 .then(r=>r.json())
 .then(d=>{
  clearInterval(timer);
  loader.style.display="none";
  searchBtn.disabled=false;

  if(!d.found){result.innerHTML="âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹ØªÙ…Ø±";return}

  const agencyLogo=agencyLogos[d.agency]||"";

  result.innerHTML=`
   <div class="result-card">
     <div class="logos">
       <img src="${mainLogo}">
       ${agencyLogo?`<img src="${agencyLogo}">`:""}
     </div>

     ${getBadge(d.status)}

     <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${d.firstName} ${d.lastName}</p>
     <p><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${d.phone}</p>
     <p><strong>Ø§Ù„ÙˆÙƒØ§Ù„Ø©:</strong> ${d.agency}</p>

     <button onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø±</button>
   </div>`;
 })
 .catch(()=>{
  clearInterval(timer);
  loader.style.display="none";
  searchBtn.disabled=false;
  alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„");
 });
}
</script>

</body>
</html>