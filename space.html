<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÙØ¶Ø§Ø¡ Ø§Ù„Ù…Ø¹ØªÙ…Ø± | Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©</title>

<style>
*{box-sizing:border-box}
body{
  font-family:'Tajawal',Tahoma,Arial,sans-serif;
  margin:0;
  background:#f2f4f8;
}

/* ===== TOP BAR ===== */
.topbar{
  background:#FFD700;
  padding:10px 16px;
  display:grid;
  grid-template-columns: 40px 1fr 40px; /* ÙŠØ³Ø§Ø± | ÙˆØ³Ø· | ÙŠÙ…ÙŠÙ† */
  align-items:center;
  position:sticky;
  top:0;
  z-index:1000;
}

/* Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
.menu-btn{
  font-size:28px;
  font-weight:900;
  cursor:pointer;
  text-align:right;
}

/* Ø§Ù„Ø´Ø¹Ø§Ø± ÙÙŠ Ø§Ù„ÙˆØ³Ø· */
.topbar-logo{
  text-align:center;
}
.topbar-logo img{
  height:42px;       /* â¬… Ø­Ø¬Ù… Ø§Ù„Ø´Ø¹Ø§Ø± Ø¯Ø§Ø®Ù„ Ø§Ù„Ø´Ø±ÙŠØ· */
  width:auto;
}

/* Ø¹Ù†ØµØ± ÙØ§Ø±Øº Ù„Ù„Ù…ÙˆØ§Ø²Ù†Ø© */
.topbar-spacer{
  width:40px;
}

/* ===== SIDEBAR ===== */
.sidebar{
  position:fixed;
  top:0;
  right:-280px;
  width:280px;
  height:100%;
  background:#fff;
  box-shadow:-4px 0 15px rgba(0,0,0,.3);
  transition:0.3s;
  z-index:2000;
  padding-top:60px;
}
.sidebar.active{ right:0; }
.sidebar a{
  display:block;
  padding:14px 22px;
  text-decoration:none;
  color:#333;
  font-weight:bold;
  border-bottom:1px solid #eee;
}
.sidebar a:hover{ background:#f5f5f5; }
.closebtn{
  position:absolute;
  top:15px;
  left:15px;
  font-size:28px;
  cursor:pointer;
}

/* ===== PAGE ===== */
.page{
  max-width:900px;
  margin:30px auto;
  padding:15px;
}
.card{
  background:#fff;
  padding:26px;
  border-radius:14px;
  box-shadow:0 6px 18px rgba(0,0,0,.15);
}
input,button{
  padding:14px;
  font-size:18px;
  width:100%;
}
button{
  background:#0d6efd;
  color:#fff;
  border:none;
  cursor:pointer;
  margin-top:15px;
}

/* ===== INFO TEXT ===== */
.hint{
  margin:10px 0 20px;
  color:#b00020;
  font-size:16px;
  font-weight:bold;
  text-align:center;
}

/* ===== LOADER ===== */
.loader{
  margin-top:20px;
  padding:20px;
  text-align:center;
  font-size:22px;
  font-weight:bold;
  color:#0d6efd;
  background:#f9f9f9;
  border-radius:12px;
}
</style>
</head>

<body>

<!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø£ØµÙØ± (Ø§Ù„Ø´Ø¹Ø§Ø± Ø¯Ø§Ø®Ù„Ù‡) -->
<div class="topbar">
  <span class="menu-btn" onclick="openSidebar()">â˜°</span>

  <div class="topbar-logo">
    <img src="https://i.ibb.co/HDMQfZKG/1766852333847-removebg-preview.png" alt="Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©">
  </div>

  <div class="topbar-spacer"></div>
</div>

<!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
<div id="sidebar" class="sidebar">
  <span class="closebtn" onclick="closeSidebar()">Ã—</span>
  <a href="index.html">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="offers.html">ğŸ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ù…Ø±Ø©</a>
  <a href="space.html">ğŸ§¾ ÙØ¶Ø§Ø¡ Ø§Ù„Ù…Ø¹ØªÙ…Ø±</a>
  <a href="upload.html">ğŸ“¤ ØªØ­Ù…ÙŠÙ„ Ø¬ÙˆØ§Ø² Ø§Ù„Ø³ÙØ±</a>
  <a href="contact.html">ğŸ“ Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
  <a href="about.html">â” Ù…Ù† Ù†Ø­Ù†</a>
</div>

<!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
<div class="page">
  <div class="card">
    <h3 style="font-size:24px;text-align:center">ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¹ØªÙ…Ø±</h3>

    <div class="hint">Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø¯ÙˆÙ† ØµÙØ±</div>

    <input
      id="phone"
      type="tel"
      value="0"
      maxlength="14"
      placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"
      onfocus="fixZero(this)"
      oninput="fixZero(this)"
    >

    <button onclick="search()">Ø¨Ø­Ø«</button>

    <div id="loader" class="loader" style="display:none">â³ Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡</div>
    <div id="result"></div>
  </div>
</div>

<script>
const webAppUrl =
"https://script.google.com/macros/s/AKfycbxNQlPGbAZyLypzmxm9qqt5WJCA8uRCyTmtZBY8JIo01LLzB_HY1X4Odg2Cv_xcTKHmxQ/exec";

/* ===== SIDEBAR ===== */
function openSidebar(){
  document.getElementById("sidebar").classList.add("active");
}
function closeSidebar(){
  document.getElementById("sidebar").classList.remove("active");
}

/* ===== PHONE ===== */
function fixZero(input){
  input.value = input.value.replace(/[^0-9]/g,"");
  if(!input.value.startsWith("0")){
    input.value = "0";
  }
}
function preparePhone(raw){
  let p = raw.replace(/\D/g,"");
  if(p.startsWith("0")) p = p.substring(1);
  if(p.startsWith("213")) p = p.substring(3);
  return p;
}

/* ===== SEARCH ===== */
function search(){
 const raw=document.getElementById("phone").value;
 const phone=preparePhone(raw);

 if(phone.length<9){
   alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­");
   return;
 }

 const loader=document.getElementById("loader");
 const result=document.getElementById("result");

 loader.style.display="block";
 result.innerHTML="";

 fetch(webAppUrl+"?phone="+phone)
 .then(r=>r.json())
 .then(d=>{
  loader.style.display="none";

  if(!d.found){
    result.innerHTML="âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹ØªÙ…Ø±";
    return;
  }

  result.innerHTML=`
    <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${d.firstName} ${d.lastName}</p>
    <p><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${d.phone}</p>
    <p><strong>Ø§Ù„ÙˆÙƒØ§Ù„Ø©:</strong> ${d.agency}</p>
  `;
 });
}
</script>

</body>
</html>