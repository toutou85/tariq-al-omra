<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¬ - ÙˆÙƒØ§Ù„Ø© ØªÙ‚Ø±Øª Ù„Ù„Ø³ÙŠØ§Ø­Ø© Ùˆ Ø§Ù„Ø³ÙØ±</title>
<style>
  * { box-sizing: border-box; }
  body {
    background: url('https://i.postimg.cc/JhKnMv57/FB-IMG-1753464094985.jpg') no-repeat center center fixed;
    background-size: cover;
    font-family: 'Tahoma', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding: 0;
  }
  .container {
    background: rgba(255,255,255,0.85);
    backdrop-filter: blur(5px);
    max-width: 450px;
    width: 90%;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    padding: 20px;
  }
  .step { display: none; }
  .step.active { display: block; }
  input, select { width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid #ccc; }
  h2 {
    text-align: center;
    margin-bottom: 20px;
    background: rgba(255,255,255,0.4);
    padding: 10px;
    border-radius: 8px;
  }
  label {
    display: block;
    font-weight: bold;
    margin-top: 15px;
    padding: 5px 10px;
    border-radius: 6px;
    background: rgba(255,255,255,0.6);
  }
  button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: #007bff;
    color: white;
    font-size: 1rem;
    transition: 0.3s;
  }
  button:hover { background: #0056b3; }
  .buttons { display: flex; gap: 10px; justify-content: space-between; }

  .remove-companion-btn {
    background:red; padding:5px 10px; margin-top:5px;
    border:none; border-radius:5px; color:white; cursor:pointer;
  }

  /* Ù†ÙˆØ§ÙØ° Ù…Ù†Ø¨Ø«Ù‚Ø© */
  .popup-box {
    display: none;
    text-align: center;
    padding: 20px;
    background: rgba(255,255,255,0.9);
    max-width: 500px;
    margin: 30px auto;
    border-radius: 15px;
    backdrop-filter: blur(6px);
    box-shadow:0 0 15px rgba(0,0,0,0.2);
  }
  .popup-box h3 { margin-bottom:15px; background: rgba(255,255,255,0.6); padding:12px; border-radius:10px; }

  @media (max-width:480px) {
    .container { padding: 15px; }
    h2 { font-size:1.3rem; }
    input, select, button { font-size:0.95rem; padding:10px; }
  }
</style>
</head>
<body>

<form id="hadjForm" class="container">

  <!-- Ø§Ù„Ø®Ø·ÙˆØ© 0: Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆØ¹Ø¯ Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø¬ -->
  <div class="step active" id="step0">
    <h2>Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆØ¹Ø¯ Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø¬</h2>

    <label>Ø§Ø®ØªØ± Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø±Ø­Ù„Ø©:</label>
    <select id="flightDate" name="flightDate" required>
      <option value="" selected disabled>Ø§Ø®ØªØ± Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø±Ø­Ù„Ø©</option>
      <option value="Ø±Ø­Ù„Ø© 01 Ø¬ÙˆÙŠÙ„ÙŠØ©">Ø±Ø­Ù„Ø© 01 Ø¬ÙˆÙŠÙ„ÙŠØ©</option>
      <option value="Ø±Ø­Ù„Ø© 05 Ø¬ÙˆÙŠÙ„ÙŠØ©">Ø±Ø­Ù„Ø© 05 Ø¬ÙˆÙŠÙ„ÙŠØ©</option>
      <option value="Ø±Ø­Ù„Ø© 10 Ø¬ÙˆÙŠÙ„ÙŠØ©">Ø±Ø­Ù„Ø© 10 Ø¬ÙˆÙŠÙ„ÙŠØ©</option>
    </select>

    <div class="buttons">
      <button type="button" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
  </div>

  <!-- Ø§Ù„Ø®Ø·ÙˆØ© 1: Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ø¬ -->
  <div class="step" id="step1">
    <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ø¬</h2>

    <label for="firstName">Ø§Ù„Ø§Ø³Ù…:</label>
    <input type="text" id="firstName" name="firstName" required>

    <label for="lastName">Ø§Ù„Ù„Ù‚Ø¨:</label>
    <input type="text" id="lastName" name="lastName" required>

    <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
    <input type="tel" id="phone" name="phone" required>

    <div class="buttons">
      <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      <button type="button" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
  </div>

  <!-- Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„ØºØ±ÙØ©ØŒ ØµÙØ© Ø§Ù„Ø­Ø¬Ø²ØŒ Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙˆÙ† -->
  <div class="step" id="step2">
    <h2>Ù†ÙˆØ¹ Ø§Ù„ØºØ±ÙØ© Ùˆ ØµÙØ© Ø§Ù„Ø­Ø¬Ø²</h2>

    <label>Ù†ÙˆØ¹ Ø§Ù„ØºØ±ÙØ©:</label>
    <select id="roomType" name="roomType" required>
      <option value="" disabled selected>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØºØ±ÙØ©</option>
      <option value="ØºØ±ÙØ© Ø«Ù†Ø§Ø¦ÙŠØ©">Ø«Ù†Ø§Ø¦ÙŠØ©</option>
      <option value="ØºØ±ÙØ© Ø«Ù„Ø§Ø«ÙŠØ©">Ø«Ù„Ø§Ø«ÙŠØ©</option>
      <option value="ØºØ±ÙØ© Ø±Ø¨Ø§Ø¹ÙŠØ©">Ø±Ø¨Ø§Ø¹ÙŠØ©</option>
      <option value="ØºØ±ÙØ© Ø®Ù…Ø§Ø³ÙŠØ©">Ø®Ù…Ø§Ø³ÙŠØ©</option>
      <option value="ØºØ±ÙØ© Ø¬Ù…Ø§Ø¹ÙŠØ©">Ø¬Ù…Ø§Ø¹ÙŠØ©</option>
    </select>

    <label>ØµÙØ© Ø§Ù„Ø­Ø¬Ø²:</label>
    <select id="reservationType" name="reservationType" required onchange="toggleCompanionSection()">
      <option value="" disabled selected>Ø§Ø®ØªØ±</option>
      <option value="Ù…Ù†ÙØ±Ø¯">Ù…Ù†ÙØ±Ø¯</option>
      <option value="Ù…Ø¹ Ø§Ù„Ø£Ø³Ø±Ø©">Ù…Ø¹ Ø§Ù„Ø£Ø³Ø±Ø©</option>
      <option value="Ù…Ø¹ ØµØ¯ÙŠÙ‚">Ù…Ø¹ ØµØ¯ÙŠÙ‚</option>
    </select>

    <div id="companionsSection" style="display:none;">
      <div id="companionsContainer"></div>
      <button type="button" onclick="addCompanion()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø§ÙÙ‚</button>
    </div>

    <div class="buttons">
      <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      <button type="button" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
  </div>

  <!-- Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ù„Ø´Ø±ÙˆØ· -->
  <div class="step" id="step3">
    <h2>Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</h2>

    <div style="max-height:200px; overflow-y:auto; border:1px solid #ccc; padding:10px;">
      <p>ğŸ”¹ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø­Ø¬.</p>
      <p>ğŸ”¹ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¹Ø¨Ø± Ù…ÙˆÙ‚Ø¹ Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø© â€“ Ø®Ø¯Ù…Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø¯ÙˆÙ† Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.</p>
      <p>ğŸ”¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ø§ ÙŠØ¹Ù†ÙŠ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² Ø­ØªÙ‰ ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙƒÙ….</p>
      <p>ğŸ”¹ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· Ø¥Ù„Ø²Ø§Ù…ÙŠØ©.</p>
    </div>

    <label>
      <input type="checkbox" name="agree" required> Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…
    </label>

    <div class="buttons">
      <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
    </div>
  </div>

</form>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± -->
<div id="message" class="popup-box">
  <h3>â³ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± <span id="countdown">10</span> Ø«ÙˆØ§Ù†Ù...</h3>
  <p>ğŸŒ¿ Ø£ÙƒØ«Ø±ÙˆØ§ Ù…Ù† Ø§Ù„Ø§Ø³ØªØºÙØ§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ğŸŒ¿</p>
</div>

<!-- Ù†Ø§ÙØ°Ø© ØµÙˆØ±Ø© Ø§Ù„Ø¬ÙˆØ§Ø² -->
<div id="passportChoice" class="popup-box">
  <h3>ğŸ“„ Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ø¬ÙˆØ§Ø² Ø§Ù„Ø³ÙØ± Ø§Ù„Ø¢Ù†ØŸ</h3>
  <button onclick="location.href='upload_hadj.html'">Ù†Ø¹Ù…</button>
  <button onclick="location.href='index.html'">Ù„Ø§Ø­Ù‚Ù‹Ø§</button>
</div>

<script>
let currentStep = 0;
const steps = document.querySelectorAll('.step');

function showStep(index) {
  steps.forEach((s,i)=> s.classList.toggle("active", i===index));
}

function nextStep() {
  if (!validateStep(currentStep)) {
    alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.");
    return;
  }
  currentStep++; showStep(currentStep);
}
function prevStep() { currentStep--; showStep(currentStep); }

showStep(currentStep);

/*â€” Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙˆÙ† â€”*/
let companionCount = 0;

function addCompanion() {
  companionCount++;
  const container = document.getElementById("companionsContainer");

  const block = document.createElement("div");
  block.innerHTML = `
    <fieldset style="padding:10px;border:1px solid #ccc;margin-top:10px;">
      <legend>Ø§Ù„Ù…Ø±Ø§ÙÙ‚ ${companionCount}</legend>

      <label>Ø§Ù„ØµÙØ©:</label>
      <select name="relation${companionCount}" required>
        <option value="">Ø§Ø®ØªØ±</option>
        <option value="Ø²ÙˆØ¬Ø©">Ø²ÙˆØ¬Ø©</option>
        <option value="Ø²ÙˆØ¬">Ø²ÙˆØ¬</option>
        <option value="Ø§Ø¨Ù†">Ø§Ø¨Ù†</option>
        <option value="Ø§Ø¨Ù†Ø©">Ø§Ø¨Ù†Ø©</option>
        <option value="Ø£Ø®">Ø£Ø®</option>
        <option value="Ø£Ø®Øª">Ø£Ø®Øª</option>
      </select>

      <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label>
      <input type="text" name="name${companionCount}" required>

      <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:</label>
      <input type="date" name="birth${companionCount}" required>

      <label>ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆØ§Ø²:</label>
      <input type="date" name="passport${companionCount}" required>

      <button type="button" class="remove-companion-btn" onclick="this.parentElement.remove()">ğŸ—‘ï¸ Ø¥Ø²Ø§Ù„Ø©</button>
    </fieldset>
  `;

  container.appendChild(block);
}

function toggleCompanionSection() {
  const type = document.getElementById("reservationType").value;
  document.getElementById("companionsSection").style.display =
    type === "Ù…Ù†ÙØ±Ø¯" ? "none" : "block";
}

function validateStep(stepIndex) {
  const step = steps[stepIndex];
  const required = step.querySelectorAll("input[required], select[required]");
  for (let field of required) {
    if (!field.value) {
      field.style.border="2px solid red";
      setTimeout(()=> field.style.border="1px solid #ccc",1200);
      return false;
    }
  }
  return true;
}

/*â€” Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ â€”*/
document.getElementById("hadjForm").addEventListener("submit", function(e){
  e.preventDefault();

  const formData = new FormData(this);

  document.getElementById("message").style.display="block";
  this.style.display="none";

  fetch("YOUR_SCRIPT_URL", {
    method:"POST",
    body:formData
  })
  .then(res=>res.text())
  .then(()=>{
    let sec=10;
    const cd=document.getElementById("countdown");
    const timer=setInterval(()=>{
      sec--; cd.textContent=sec;
      if(sec===0){
        clearInterval(timer);
        document.getElementById("message").style.display="none";
        document.getElementById("passportChoice").style.display="block";
      }
    },1000);
  })
  .catch(err=>{
    alert("Ø®Ø·Ø£: "+err.message);
    this.style.display="block";
    document.getElementById("message").style.display="none";
  });

});
</script>

</body>
</html>