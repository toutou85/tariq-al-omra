<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±Ø©</title>
<style>
  * { box-sizing: border-box; }
  body {
    background: url('https://i.postimg.cc/JhKnMv57/FB-IMG-1753464094985.jpg') no-repeat center center fixed;
    background-size: cover;
    font-family: 'Tahoma', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding: 0;
  }
  .container {
    background: rgba(255,255,255,0.85);
    backdrop-filter: blur(5px);
    max-width: 450px;
    width: 90%;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    padding: 20px;
  }
  .step { display: none; }
  .step.active { display: block; }
  input, select { width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid #ccc; }
  h2 {
    text-align: center;
    margin-bottom: 20px;
    background: rgba(255,255,255,0.4);
    padding: 10px;
    border-radius: 8px;
  }
  label {
    display: block;
    font-weight: bold;
    margin-top: 15px;
    padding: 5px 10px;
    border-radius: 6px;
    background: rgba(255,255,255,0.6);
  }
  button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: #007bff;
    color: white;
    font-size: 1rem;
    transition: 0.3s;
  }
  button:hover { background: #0056b3; }
  .buttons { display: flex; gap: 10px; justify-content: space-between; }
  .remove-companion-btn { background:red; padding:5px 10px; margin-top:5px; border:none; border-radius:5px; color:white; cursor:pointer; }
  .popup-box {
    display: none;
    text-align: center;
    padding: 20px;
    background: rgba(255,255,255,0.9);
    max-width: 500px;
    margin: 30px auto;
    border-radius: 15px;
    backdrop-filter: blur(6px);
    box-shadow:0 0 15px rgba(0,0,0,0.2);
  }
  .popup-box h3 { margin-bottom:15px; background: rgba(255,255,255,0.6); padding:12px; border-radius:10px; }
  @media (max-width:480px) {
    .container { padding: 15px; }
    h2 { font-size:1.3rem; }
    input, select, button { font-size:0.95rem; padding:10px; }
  }
</style>
</head>
<body>

<form id="umrahForm" class="container">
  <!-- Ø§Ù„Ø®Ø·ÙˆØ© 0: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆÙƒØ§Ù„Ø© -->
  <div class="step active" id="step0">
    <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ø±Ø¶</h2>
    <label for="agencyDisplay">Ø§Ø³Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø©:</label>
    <select id="agencyDisplay" required onchange="updateBranches()">
      <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„ÙˆÙƒØ§Ù„Ø©</option>
      <option value="ÙˆÙƒØ§Ù„Ø© ØªÙ‚Ø±Øª Ù„Ù„Ø³ÙŠØ§Ø­Ø© Ùˆ Ø³ÙØ±">ÙˆÙƒØ§Ù„Ø© ØªÙ‚Ø±Øª Ù„Ù„Ø³ÙŠØ§Ø­Ø© Ùˆ Ø³ÙØ±</option>
    </select>
    <input type="hidden" id="agencyName" name="agencyName">
    <div class="buttons">
      <button type="button" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
  </div>

  <!-- Ø§Ù„Ø®Ø·ÙˆØ© 1: Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ø¨ÙˆÙ† -->
  <div class="step" id="step1">
    <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ø¨ÙˆÙ†</h2>
    <label for="firstName">Ø§Ù„Ø§Ø³Ù…:</label>
    <input type="text" id="firstName" name="firstName" required>
    <label for="lastName">Ø§Ù„Ù„Ù‚Ø¨:</label>
    <input type="text" id="lastName" name="lastName" required>
    <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
    <input type="tel" id="phone" name="phone" required>
    <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
    <input type="email" id="email" name="email" required>
    <label for="age">Ø§Ù„Ø¹Ù…Ø±:</label>
    <input type="number" id="age" name="age" min="0" required>
    <label for="passportExpiry">ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø¬ÙˆØ§Ø² Ø§Ù„Ø³ÙØ±:</label>
    <input type="date" id="passportExpiry" name="passportExpiry" required>
    <div class="buttons">
      <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      <button type="button" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
  </div>

  <!-- Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„ÙˆÙ„Ø§ÙŠØ© ÙˆØ§Ù„ÙØ±Ø¹ -->
  <div class="step" id="step2">
    <h2>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆÙ„Ø§ÙŠØ© ÙˆØ§Ù„ÙØ±Ø¹</h2>
    <label for="wilaya">Ø§Ù„ÙˆÙ„Ø§ÙŠØ©:</label>
    <select id="wilaya" name="wilaya" required></select>
    <label for="branch">Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø£Ù‚Ø±Ø¨:</label>
    <select id="branch" name="branch" required>
      <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ø¹</option>
    </select>
    <div class="buttons">
      <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      <button type="button" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
  </div>

  <!-- Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙˆÙ† ÙˆÙØªØ±Ø© Ø§Ù„Ø°Ù‡Ø§Ø¨ -->
  <div class="step" id="step3">
    <h2>Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙˆÙ† ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØªØ±Ø©</h2>
    <label for="roomType">Ù†ÙˆØ¹ Ø§Ù„ØºØ±ÙØ©:</label>
    <select id="roomType" name="roomType" required>
      <option value="" disabled selected>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØºØ±ÙØ©</option>
      <option value="ØºØ±ÙØ© Ø«Ù†Ø§Ø¦ÙŠØ©">ØºØ±ÙØ© Ø«Ù†Ø§Ø¦ÙŠØ©</option>
      <option value="ØºØ±ÙØ© Ø«Ù„Ø§Ø«ÙŠØ©">ØºØ±ÙØ© Ø«Ù„Ø§Ø«ÙŠØ©</option>
      <option value="ØºØ±ÙØ© Ø±Ø¨Ø§Ø¹ÙŠØ©">ØºØ±ÙØ© Ø±Ø¨Ø§Ø¹ÙŠØ©</option>
      <option value="ØºØ±ÙØ© Ø®Ù…Ø§Ø³ÙŠØ©">ØºØ±ÙØ© Ø®Ù…Ø§Ø³ÙŠØ©</option>
      <option value="ØºØ±ÙØ© Ø¬Ù…Ø§Ø¹ÙŠØ©">ØºØ±ÙØ© Ø¬Ù…Ø§Ø¹ÙŠØ©</option>
    </select>
    <label for="reservationType">ØµÙØ© Ø§Ù„Ø­Ø¬Ø²:</label>
    <select id="reservationType" name="reservationType" required onchange="toggleCompanionSection()">
      <option value="" disabled selected>Ø§Ø®ØªØ± ØµÙØ© Ø§Ù„Ø­Ø¬Ø²</option>
      <option value="Ù…Ù†ÙØ±Ø¯">Ù…Ù†ÙØ±Ø¯</option>
      <option value="Ù…Ø¹ ØµØ¯ÙŠÙ‚">Ù…Ø¹ ØµØ¯ÙŠÙ‚</option>
      <option value="Ù…Ø¹ Ø§Ù„Ø£Ø³Ø±Ø©">Ù…Ø¹ Ø§Ù„Ø£Ø³Ø±Ø©</option>
    </select>

    <label for="startDate">ÙØªØ±Ø© Ø§Ù„Ø°Ù‡Ø§Ø¨ - Ù…Ù†:</label>
    <input type="date" id="startDate" name="startDate" required>
    <label for="endDate">Ø¥Ù„Ù‰:</label>
    <input type="date" id="endDate" name="endDate" required>

    <div id="companionsSection" style="display:none;">
      <div id="companionsContainer"></div>
      <button type="button" onclick="addCompanion()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø§ÙÙ‚</button>
    </div>

    <div class="buttons">
      <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      <button type="button" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
  </div>

  <!-- Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø§Ù„Ø´Ø±ÙˆØ· -->
  <div class="step" id="step4">
    <h2>Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</h2>
    <div style="max-height:200px; overflow-y:auto; border:1px solid #ccc; padding:10px;">
      <p>âœ¨ <strong>Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©</strong> Ù…Ù†ØµØ© Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ø¯ÙˆÙ† Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.</p>
      

<p>ğŸ“ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ù† Ø¥Ù†Ø¬Ø§Ø² <strong>Ø·Ù‡ Ø¨Ø±Ù‚ÙŠÙ‚Ø©</strong>ØŒ Ù…Ø±Ø§ÙÙ‚ Ù…Ø¹ØªÙ…Ø¯ Ù„Ø¯Ù‰ ÙˆÙƒØ§Ù„Ø© <strong>ØªÙ‚Ø±Øª Ù„Ù„Ø³ÙŠØ§Ø­Ø© ÙˆØ§Ù„Ø³ÙØ±</strong>.</p>
      <p>ğŸ“Œ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.</p>
      <p>ğŸ“ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ØªØ¹ØªØ¨Ø± Ø¥Ù„Ø²Ø§Ù…ÙŠØ©.</p>
    </div>
    <label>
      <input type="checkbox" name="agree" required> Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…
    </label>
    <div class="buttons">
      <button type="button" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
    </div>
  </div>
</form>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± -->
<div id="message" class="popup-box">
  <h3>â³ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± <span id="countdown">10</span> Ø«ÙˆØ§Ù†ÙŠ...</h3>
  <p>âœ¨ Ù„Ø§ ØªÙ†Ø³Ù Ø§Ù„Ø§Ø³ØªØºÙØ§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± âœ¨</p>
</div>

<!-- Ù†Ø§ÙØ°Ø© Ø®ÙŠØ§Ø± ØªØ­Ù…ÙŠÙ„ Ø¬ÙˆØ§Ø² Ø§Ù„Ø³ÙØ± -->
<div id="passportChoice" class="popup-box">
  <h3>ğŸ“„ Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ØµÙˆØ± Ø¬ÙˆØ§Ø² Ø§Ù„Ø³ÙØ± Ø§Ù„Ø¢Ù†ØŸ</h3>
  <button onclick="location.href='upload.html'">ğŸ“¤ Ù†Ø¹Ù…ØŒ Ø£Ø±ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±</button>
  <button onclick="location.href='index.html'">â­ï¸ Ù„Ø§ØŒ Ø³Ø£Ø­Ù…Ù„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§</button>
</div>

<script>
let currentStep = 0;
const steps = document.querySelectorAll('.step');
function showStep(index) {
  steps.forEach((step,i) => step.classList.toggle('active', i===index));
}
function nextStep() {
  if(currentStep<steps.length-1) { currentStep++; showStep(currentStep); }
}
function prevStep() {
  if(currentStep>0) { currentStep--; showStep(currentStep); }
}

window.addEventListener('DOMContentLoaded',()=>{
  // Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª
  const wilayas = ["Ø£Ø¯Ø±Ø§Ø±","Ø§Ù„Ø´Ù„Ù","Ø§Ù„Ø£ØºÙˆØ§Ø·","Ø£Ù… Ø§Ù„Ø¨ÙˆØ§Ù‚ÙŠ","Ø¨Ø§ØªÙ†Ø©","Ø¨Ø¬Ø§ÙŠØ©","Ø¨Ø³ÙƒØ±Ø©","Ø¨Ø´Ø§Ø±","Ø§Ù„Ø¨Ù„ÙŠØ¯Ø©","Ø§Ù„Ø¨ÙˆÙŠØ±Ø©","ØªÙ…Ù†Ø±Ø§Ø³Øª","ØªØ¨Ø³Ø©","ØªÙ„Ù…Ø³Ø§Ù†","ØªÙŠØ§Ø±Øª","ØªÙŠØ²ÙŠ ÙˆØ²Ùˆ","Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±","Ø§Ù„Ø¬Ù„ÙØ©","Ø¬ÙŠØ¬Ù„","Ø³Ø·ÙŠÙ","Ø³Ø¹ÙŠØ¯Ø©","Ø³ÙƒÙŠÙƒØ¯Ø©","Ø³ÙŠØ¯ÙŠ Ø¨Ù„Ø¹Ø¨Ø§Ø³","Ø¹Ù†Ø§Ø¨Ø©","Ù‚Ø§Ù„Ù…Ø©","Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©","Ø§Ù„Ù…Ø¯ÙŠØ©","Ù…Ø³ØªØºØ§Ù†Ù…","Ø§Ù„Ù…Ø³ÙŠÙ„Ø©","Ù…Ø¹Ø³ÙƒØ±","ÙˆØ±Ù‚Ù„Ø©","ÙˆÙ‡Ø±Ø§Ù†","Ø§Ù„Ø¨ÙŠØ¶","Ø¥Ù„ÙŠØ²ÙŠ","Ø¨Ø±Ø¬ Ø¨ÙˆØ¹Ø±ÙŠØ±ÙŠØ¬","Ø¨ÙˆÙ…Ø±Ø¯Ø§Ø³","Ø§Ù„Ø·Ø§Ø±Ù","ØªÙ†Ø¯ÙˆÙ","ØªÙŠØ³Ù…Ø³ÙŠÙ„Øª","Ø§Ù„ÙˆØ§Ø¯ÙŠ","Ø®Ù†Ø´Ù„Ø©","Ø³ÙˆÙ‚ Ø£Ù‡Ø±Ø§Ø³","ØªÙŠØ¨Ø§Ø²Ø©","Ù…ÙŠÙ„Ø©","Ø¹ÙŠÙ† Ø§Ù„Ø¯ÙÙ„Ù‰","Ø§Ù„Ù†Ø¹Ø§Ù…Ø©","Ø¹ÙŠÙ† ØªÙ…ÙˆØ´Ù†Øª","ØºØ±Ø¯Ø§ÙŠØ©","ØºÙ„ÙŠØ²Ø§Ù†","ØªÙ…ÙŠÙ…ÙˆÙ†","Ø¨Ø±Ø¬ Ø¨Ø§Ø¬ÙŠ Ù…Ø®ØªØ§Ø±","Ø£ÙˆÙ„Ø§Ø¯ Ø¬Ù„Ø§Ù„","Ø¨Ù†ÙŠ Ø¹Ø¨Ø§Ø³","Ø¥Ù† ØµØ§Ù„Ø­","Ø¥Ù† Ù‚Ø²Ø§Ù…","ØªÙ‚Ø±Øª","Ø¬Ø§Ù†Øª","Ø§Ù„Ù…ØºÙŠØ±","Ø§Ù„Ù…Ù†ÙŠØ¹Ø©"];
  const wilayaSelect = document.getElementById('wilaya');
  wilayas.forEach(w=>{ let opt=document.createElement('option'); opt.value=w; opt.textContent=w; wilayaSelect.appendChild(opt); });

  showStep(currentStep);
});

// ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±ÙˆØ¹ Ø­Ø³Ø¨ Ø§Ù„ÙˆÙƒØ§Ù„Ø©
const agencyBranches = {
  "ÙˆÙƒØ§Ù„Ø© ØªÙ‚Ø±Øª Ù„Ù„Ø³ÙŠØ§Ø­Ø© Ùˆ Ø³ÙØ±":["ØªÙ‚Ø±Øª","Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø§Ù„Ø¹Ø§ØµÙ…Ø© Ø­Ø§Ù„ÙŠØ§ Ø®Ù…ÙŠØ³ Ø§Ù„Ø®Ø´Ù†Ø©","Ø¨ÙˆÙ…Ø±Ø¯Ø§Ø³","Ø³Ø·ÙŠÙ","Ø§Ù„Ù…ØºÙŠØ±","Ø§Ù„Ø¬Ù„ÙØ©","Ø§Ù„Ù…Ø¯ÙŠØ©","Ù…Ø³ØªØºØ§Ù†Ù…","Ø¨Ø´Ø§Ø±","Ø§Ù„Ø´Ù„Ù","Ø¹Ù†Ø§Ø¨Ø©","ØªÙ…Ù†Ø±Ø§Ø³Øª","Ù‚Ø³Ù†Ø·ÙŠÙ†Ø© ÙˆÙƒØ§Ù„Ø© Ø§Ù„Ø³Ù‚ÙŠÙØ©","Ø¬ÙŠØ¬Ù„ ÙˆÙƒØ§Ù„Ø© Ø§Ù„Ø³Ù‚ÙŠÙØ©","ÙˆÙ‡Ø±Ø§Ù†","Ø³ÙƒÙŠÙƒØ¯Ø© ÙˆÙƒØ§Ù„Ø© Ø§Ù„Ø³Ù‚ÙŠÙØ©","Ø³ÙˆÙ‚ Ø£Ù‡Ø±Ø§Ø³ ÙˆÙƒØ§Ù„Ø© Ø§Ù„Ø³Ù‚ÙŠÙØ©","Ù…ÙŠÙ„Ø© ÙˆÙƒØ§Ù„Ø© Ø§Ù„Ø³Ù‚ÙŠÙØ©"]
};
function updateBranches(){
  const branchSelect = document.getElementById('branch');
  branchSelect.innerHTML='<option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ø¹</option>';
  const selectedAgency = document.getElementById('agencyDisplay').value;
  if(selectedAgency && agencyBranches[selectedAgency]){
    agencyBranches[selectedAgency].forEach(b=>{
      let opt=document.createElement('option'); opt.value=b; opt.textContent=b; branchSelect.appendChild(opt);
    });
  }
  document.getElementById('agencyName').value=selectedAgency;
}

// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙŠÙ†
let companionCount=0;
function addCompanion(){
  companionCount++;
  const container=document.getElementById('companionsContainer');
  const div=document.createElement('div');
  div.innerHTML=`
    <fieldset style="margin:10px 0;padding:10px;border:1px solid #ccc;">
      <legend>Ø§Ù„Ù…Ø±Ø§ÙÙ‚ ${companionCount}</legend>
      <label>Ø§Ù„ØµÙØ©:</label>
      <select name="companionRelation${companionCount}" required>
        <option value="">Ø§Ø®ØªØ±</option>
        <option value="Ø²ÙˆØ¬Ø©">Ø²ÙˆØ¬Ø©</option>
        <option value="Ø§Ø¨Ù†">Ø§Ø¨Ù†</option>
        <option value="Ø§Ø¨Ù†Ø©">Ø§Ø¨Ù†Ø©</option>
        <option value="Ø£Ø®">Ø£Ø®</option>
        <option value="Ø£Ø®Øª">Ø£Ø®Øª</option>
        <option value="Ø£Ù…">Ø£Ù…</option>
        <option value="Ø£Ø¨">Ø£Ø¨</option>
      </select>
      <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label>
      <input type="text" name="companionName${companionCount}" required>
      <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:</label>
      <input type="date" name="companionBirth${companionCount}" required>
      <label>ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆØ§Ø²:</label>
      <input type="date" name="companionPassport${companionCount}" required>
      <button type="button" class="remove-companion-btn" onclick="this.parentElement.remove()">ğŸ—‘ï¸ Ø¥Ø²Ø§Ù„Ø©</button>
    </fieldset>`;
  container.appendChild(div);
}

// Ø¥Ø¸Ù‡Ø§Ø± Ø£Ùˆ Ø¥Ø®ÙØ§Ø¡ Ù‚Ø³Ù… Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙŠÙ† Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¬Ø²
function toggleCompanionSection(){
  const type = document.getElementById('reservationType').value;
  const companionsDiv=document.getElementById('companionsSection');
  companionsDiv.style.display=(type==='Ù…Ù†ÙØ±Ø¯')?'none':'block';
}

// Ø¶Ø¨Ø· ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ø¹ÙˆØ¯Ø©
const startDate=document.getElementById('startDate');
const endDate=document.getElementById('endDate');
startDate.addEventListener('change',()=>{
  endDate.min=startDate.value;
  if(endDate.value<startDate.value) endDate.value=startDate.value;
});

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
document.getElementById('umrahForm').addEventListener('submit',function(e){
  e.preventDefault();
  const form=this;
  const formData=new FormData(form);

  const companions=[];
  document.querySelectorAll('#companionsContainer fieldset').forEach((fieldset,i)=>{
    const relation=fieldset.querySelector(`select[name="companionRelation${i+1}"]`)?.value||"";
    const name=fieldset.querySelector(`input[name="companionName${i+1}"]`)?.value||"";
    const birth=fieldset.querySelector(`input[name="companionBirth${i+1}"]`)?.value||"";
    const passport=fieldset.querySelector(`input[name="companionPassport${i+1}"]`)?.value||"";
    if(name) companions.push(`${relation}: ${name} - Ù…ÙŠÙ„Ø§Ø¯: ${birth} - Ø§Ù†ØªÙ‡Ø§Ø¡ Ø¬ÙˆØ§Ø²: ${passport}`);
  });
  formData.append('companions', companions.join(' | '));

  document.getElementById('message').style.display='block';
  form.style.display='none';

  fetch('https://script.google.com/macros/s/AKfycbwbxMHpUMcOfzk2CqdMbFM0EWij31KkPDMgNAQ-pqmXfVh15Rbxw5VokqhYUrOibq9-ag/exec',{
    method:'POST', body:formData
  })
  .then(res=>res.text())
  .then(res=>{
    let counter=10;
    const countdownElem=document.getElementById('countdown');
    const interval=setInterval(()=>{
      counter--;
      countdownElem.textContent=counter;
      if(counter===0){
        clearInterval(interval);
        alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!");
        document.getElementById('message').style.display='none';
        document.getElementById('passportChoice').style.display='block';
      }
    },1000);
  })
  .catch(err=>{
    alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: "+err.message);
    form.style.display='block';
    document.getElementById('message').style.display='none';
  });
});
</script>
</body>
</html>