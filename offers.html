<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>عروض العمرة</title>
  <style>
    body {
      font-family: "Tahoma", Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
    }

    /* 🎨 ألوان خلفية لكل مطار */
    .card.airport-الجزائر { background: #f8d7da; }     /* أحمر فاتح */
    .card.airport-تمنغاست { background: #d1ecf1; }     /* أزرق سماوي */
    .card.airport-ورقلة { background: #d4edda; }       /* أخضر فاتح */
    .card.airport-وهران { background: #fff3cd; }       /* أصفر فاتح */
    .card.airport-عنابة { background: #e2e3e5; }       /* رمادي فاتح */
    .card.airport-قسنطينة { background: #f5d0fe; }     /* بنفسجي فاتح */

    .card {
      border-radius: 15px;
      padding: 15px;
      margin: 10px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }
    .card-content h3 {
      margin-top: 0;
      font-size: 18px;
    }
    .card-content p {
      margin: 5px 0;
    }
    .card-buttons {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .card-buttons .btn {
      padding: 8px 12px;
      border-radius: 8px;
      text-decoration: none;
      color: #fff;
      font-size: 14px;
      transition: 0.3s;
    }
    .card-buttons .btn-details { background: #007bff; }
    .card-buttons .btn-share { background: #28a745; }
    .card-buttons .btn:hover { opacity: 0.85; }
  </style>
</head>
<body>

  <h1>📢 عروض العمرة</h1>
  <div id="offersGrid" class="grid"></div>

  <script>
    // 📌 بيانات تجريبية (استبدلها ببيانات Google Sheets لاحقاً)
    const grouped = {
      "الجزائر": [
        {
          "ID": 1,
          "اسم العرض": "عمرة الجزائر",
          "المطار": "الجزائر",
          "الفندق": "فندق سرايا الضيافة",
          "الخطوط الجوية": "الخطوط الجوية الجزائرية",
          "تاريخ  الر حلة": "2025-10-05",
          "مدة الرحلة": "15 يوم",
          "السعر الغرفة الجماعية (دج)": "139000"
        }
      ],
      "عنابة": [
        {
          "ID": 2,
          "اسم العرض": "عمرة عنابة",
          "المطار": "عنابة",
          "الفندق": "فندق رياض الضيافة",
          "الخطوط الجوية": "طيران ناس",
          "تاريخ  الر حلة": "2025-09-25",
          "مدة الرحلة": "12 يوم",
          "السعر الغرفة الجماعية (دج)": "135000"
        }
      ],
      "وهران": [
        {
          "ID": 3,
          "اسم العرض": "عمرة وهران",
          "المطار": "وهران",
          "الفندق": "فندق منارة المسك",
          "الخطوط الجوية": "الخطوط الجوية الجزائرية",
          "تاريخ  الر حلة": "2025-12-10",
          "مدة الرحلة": "10 أيام",
          "السعر الغرفة الجماعية (دج)": "140000"
        }
      ]
    };

    // ✅ دالة لإنشاء البطاقات مرتبة حسب التاريخ
    function renderCards(grouped) {
      const grid = document.getElementById("offersGrid");
      grid.innerHTML = "";

      Object.keys(grouped).forEach(airport => {
        // ⏳ ترتيب حسب تاريخ الرحلة
        grouped[airport].sort((a, b) => {
          return new Date(a['تاريخ  الر حلة']) - new Date(b['تاريخ  الر حلة']);
        });

        grouped[airport].forEach(item => {
          const card = document.createElement("div");
          card.className = "card airport-" + airport;

          // 🔗 رابط العرض
          const offerUrl = `offer-details.html?id=${item['ID']}`;

          card.innerHTML = `
            <div class="card-content">
              <h3>${item['اسم العرض']}</h3>
              <p><strong>✈️ المطار:</strong> ${item['المطار']}</p>
              <p><strong>🏨 الفندق:</strong> ${item['الفندق']}</p>
              <p>✈️ ${item['الخطوط الجوية']}</p>
              <p class="date-duration">
                📅 ${item['تاريخ  الر حلة']}  ⏳ ${item['مدة الرحلة']}
              </p>
              <p>💵 ${item['السعر الغرفة الجماعية (دج)']} دج</p>
              <div class="card-buttons">
                <a class="btn btn-details" href="${offerUrl}">📖 مزيد من التفاصيل</a>
                <a class="btn btn-share" href="https://wa.me/?text=🔥 عرض عمرة من مطار ${item['المطار']} 🛫%0A🏨 فندق: ${item['الفندق']}%0A💵 السعر: ${item['السعر الغرفة الجماعية (دج)']} دج%0A📅 ${item['تاريخ  الر حلة']} ⏳ ${item['مدة الرحلة']}%0A🔗 رابط العرض: ${location.origin}/${offerUrl}" target="_blank">📤 مشاركة العرض</a>
              </div>
            </div>
          `;
          grid.appendChild(card);
        });
      });
    }

    // 🚀 تشغيل
    renderCards(grouped);
  </script>
</body>
</html>