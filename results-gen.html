<!DOCTYPE html>  <html lang="ar" dir="rtl">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <!-- Open Graph -->

<!-- Open Graph: ØµÙˆØ±Ø© Ù…Ø¹Ø§ÙŠÙ†Ø© ÙÙŠØ³Ø¨ÙˆÙƒ -->
<meta property="og:image" content="https://res.cloudinary.com/dmc36nijl/image/upload/v1769426692/ei_1769426620917-removebg-preview_yuws6p.png">
<meta property="og:image:secure_url" content="https://res.cloudinary.com/dmc36nijl/image/upload/v1769426692/ei_1769426620917-removebg-preview_yuws6p.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<title>Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¹Ù…Ø±Ø©</title>  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"> 


<style>  
body{  
  font-family:Tajawal,Arial;  
  margin:0;  
  background:  
    linear-gradient(rgba(0,0,0,.45),rgba(0,0,0,.45)),  
    url("https://i.supaimg.com/c5d71aa9-c2b3-4263-8bd6-2f800145c063.jpg")  
    center/cover fixed no-repeat;  
}  
  
header{  
  height:60px;  
  background:#8b0000;  
  color:#fff;  
  display:flex;  
  align-items:center;  
  padding:0 15px;  
}  
.menu-btn{font-size:26px;cursor:pointer}  
header h1{flex:1;text-align:center;font-size:18px;margin:0}  
  
.whatsapp-top{  
  position:fixed;  
top:60px;                    
  left:12px;  
  width:48px;  
  height:48px;  
  background:#25D366;  
  color:#fff;  
  border-radius:50%;  
  display:flex;  
  align-items:center;  
  justify-content:center;  
  font-size:28px;  
  z-index:13000;  
}  
  
#sideMenu{  
  position:fixed;  
  top:0;right:-260px;  
  width:260px;height:100%;  
  background:#8b0000;  
  padding-top:70px;  
  transition:.3s;  
  z-index:10000  
}  
#sideMenu a{  
  display:block;  
  padding:14px 18px;  
  color:#fff;  
  text-decoration:none;  
}  
#overlay{  
  display:none;  
  position:fixed;  
  inset:0;  
  background:rgba(0,0,0,.6);  
  z-index:9000  
}  
  
.container{  
  max-width:1200px;  
  margin:25px auto;  
  background:rgba(255,255,255,.60);  
  padding:20px;  
  border-radius:20px;  
}  
  
.filters{  
  display:grid;  
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));  
  gap:10px;  
  margin-bottom:20px  
}  
select{padding:8px;border-radius:8px}  
  
.airport-group{margin-bottom:30px}  
.airport-title{font-weight:900;color:#8b0000;margin-bottom:10px}  
.airport-row{display:flex;
gap:16px;
overflow-x:auto;
overflow-y:visible; /* ğŸ‘ˆ Ø§Ù„Ø­Ù„ */
}
  

.visitor-box{
  display:flex;
  align-items:center;
  gap:10px;

  position:absolute;
  left:15px;          /* Ø£Ù‚ØµÙ‰ Ø§Ù„ÙŠØ³Ø§Ø± */
  top:50%;
  transform:translateY(-50%);

  background:rgba(255,255,255,.15);
  backdrop-filter:blur(6px);
  padding:12px 18px;
  border-radius:14px;
  font-family:Tajawal,Arial;
  width:max-content;
  box-shadow:0 8px 20px rgba(0,0,0,.15);
}
 
  
.visitor-box i{  
  font-size:20px;  
  color:#1e90ff;  
}  
  
.visitor-box span{  
color:#fff;  
  font-size:18px;  
  font-weight:700;  
}  
  
.visitor-box small{  
color:#fff;  
  font-size:13px;  
  opacity:.85;  
}  
header{  
  height:60px;  
  background:#8b0000;  
  color:#fff;  
  display:flex;  
  align-items:center;  
  gap:10px;  
  padding:0 15px;  
}  
  
header h1{  
  flex:1;  
  text-align:center;  
  font-size:18px;  
  margin:0;  
} 

 .modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  z-index:20000;
  align-items:center;
  justify-content:center;
}
header{
  position:relative;
}
/* Ø§Ù„Ù„ÙˆÙ‚Ùˆ */
.site-logo{
  position:absolute;
  left:62%;
  top:6px;                     /* ÙŠÙ†Ø²Ù„ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø´Ø±ÙŠØ· */
  transform:translateX(-50%);
  
  height:58px;
  width:auto;
  cursor:pointer;

  /* 3D effect */
  filter:drop-shadow(0 6px 10px rgba(0,0,0,.45));
  transform-style:preserve-3d;

  transition:transform .25s ease, filter .25s ease;
}
/* 3D Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± */
.site-logo:hover{
  transform:
    translateX(-50%)
    translateY(-3px)
    rotateX(10deg)
    rotateY(-6deg);
  filter:drop-shadow(0 10px 18px rgba(0,0,0,.55));
}

/* Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· */
.site-logo:active{
  transform:
    translateX(-50%)
    translateY(1px)
    rotateX(0deg);
}@media (max-width:600px){
  .site-logo{
    height:90px;
    top:4px;
  }

}


.card{  
    display:flex;
  flex-direction:column;
  position:relative;  
overflow:visible;   /* âœ… ÙÙ‚Ø· Ù‡Ù†Ø§ */

  min-width:300px;  
  background:#fff;  
  border-radius:18px;  
  padding:10px;  
  box-shadow:0 8px 25px rgba(0,0,0,.08);  
}  
 
.card-actions{  
  margin-top:auto;   /* ğŸ‘ˆ ÙŠÙ†Ø²Ù„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù„Ù„Ù‚Ø§Ø¹ */
  display:flex;  
  gap:8px;  
  margin-top:40px;  
}  
.card-actions button{  
  flex:1;  
  padding:10px;  
  border:none;  
  border-radius:10px;  
  background:#8b0000;  
  color:#fff;  
  cursor:pointer;  
  font-size:14px;  
}  


.airline-card{
  position:absolute;
  top:265px;           /* ğŸ‘ˆ ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù…Ø³Ø§ÙØ© ØªØ­Øª Ø§Ù„ØºÙŠÙ…Ø© */
  left:15px;

  width:92px;
  height:50px;

  display:flex;
  align-items:center;
  justify-content:center;

  background:#fff;
  border-radius:12px;
  box-shadow:0 3px 10px rgba(0,0,0,.15);

  transition:.2s ease;
}

.airline-card img{
  max-width:60px;      /* ğŸ‘ˆ ØªØ­ÙƒÙ… ÙÙŠ Ø­Ø¬Ù… Ø§Ù„Ø´Ø¹Ø§Ø± */
  max-height:35px;
  object-fit:contain;
}

.airline-card:hover{
  transform:translateY(2px);
}

/* ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØµÙˆØ±Ø© */
.airline-card.empty::after{
  content:"â€”";
  font-size:26px;
  color:#bbb;
}
  
.agency-name{
  font-size:10px;      /* ğŸ‘ˆ ÙƒØ¨Ù‘Ø± Ø­Ø³Ø¨ Ø±ØºØ¨ØªÙƒ */
  font-weight:900;
  color:#8b0000;
}
  
.wa-below i{  
  color:#fff;  
  font-size:24px;  
}  
  
#detailsModal,#registerModal{  
  display:none;  
  position:fixed;  
  inset:0;  
  background:rgba(0,0,0,.6);  
  z-index:20000;  
  align-items:center;  
  justify-content:center;  
}  
  
.modal-box{  
  background:#fff;  
  width:90%;  
  max-width:420px;  
  padding:20px;  
  border-radius:18px;  
}  
.modal-box input{  
  width:100%;  
  padding:10px;  
  margin:6px 0;  
  border-radius:8px;  
  border:1px solid #ccc;  
}  
.travel-date{
  margin-top:140px;
  padding:10px 14px;
  border-radius:14px;
  font-size:17px;
  font-weight:600;
  display:inline-flex;
  align-items:center;
  gap:8px;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
}

/* Ù‚Ø±ÙŠØ¨ Ø¬Ø¯Ù‹Ø§ */
.travel-date.soon{
  background:linear-gradient(135deg,#ffeaea,#ffd1d1);
  color:#8b0000;
}

/* Ù…ØªÙˆØ³Ø· */
.travel-date.mid{
  background:linear-gradient(135deg,#fff7e0,#ffe4a3);
  color:#6b4a00;
}

/* Ø¨Ø¹ÙŠØ¯ */
.travel-date.far{
  background:linear-gradient(135deg,#e9f7ef,#c9f0db);
  color:#0b5f3c;
}

.travel-date i{
  font-size:20px;
}
/* === FORCE DATE COLORS === */
.card .travel-date.soon{
  background:linear-gradient(135deg,#ffeaea,#ffd1d1) !important;
  color:#8b0000 !important;
}

.card .travel-date.mid{
  background:linear-gradient(135deg,#fff7e0,#ffe4a3) !important;
  color:#6b4a00 !important;
}

.card .travel-date.far{
  background:linear-gradient(135deg,#e9f7ef,#c9f0db) !important;
  color:#0b5f3c !important;
}
/* Ø§Ù„ÙŠÙˆÙ… */
.travel-date.soon .remain{
  animation:pulse 1.6s infinite;
}

@keyframes pulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.08)}
  100%{transform:scale(1)}
}
.date-color{
  padding:4px 10px;
  border-radius:999px;
  font-weight:700;
  display:inline-flex;
  align-items:center;
  gap:6px;
}

/* Ù‚Ø±ÙŠØ¨ */
.date-color.soon{
  color:#8b0000;
}

/* Ù…ØªÙˆØ³Ø· */
.date-color.mid{
  color:#7a5200;
}

/* Ø¨Ø¹ÙŠØ¯ */
.date-color.far{
  color:#0b5f3c;
}


  
.price-box{
  display:flex;
  align-items:stretch;
  gap:6px;
  margin-top:6px;
}
/* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø³Ø¹Ø± */
.price{
  flex:1;
  background:linear-gradient(135deg,#fffaf3,#f3e9dc);
  padding:12px 10px;
  border-radius:14px;
  text-align:center;
  font-weight:700;
  font-size:20px;
  color:#8b0000;
  box-shadow:0 6px 16px rgba(0,0,0,.08);
  border:1px solid rgba(139,0,0,.15);
}

/* Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø³Ø¹Ø± */
.wa-price{
  width:48px;
  height:48px;
  border-radius:14px;
  border:none;
  background:linear-gradient(135deg,#25D366,#1ebe5d);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  box-shadow:0 6px 16px rgba(37,211,102,.35);
  transition:.25s ease;
}

/* Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ§ØªØ³Ø§Ø¨ */
.wa-price i{
  color:#fff;
  font-size:22px;
}

/* ØªØ£Ø«ÙŠØ±Ø§Øª */
.wa-price:hover{
  transform:translateY(-2px) scale(1.05);
  box-shadow:0 10px 22px rgba(37,211,102,.45);
}

.wa-price:active{
  transform:scale(.95);
}  
/* =========================
   Ø§Ù„ÙƒØ§Ø±Ø¯
========================= */
.card{
  position:relative;
  overflow:visible;
  z-index:10;
}



.card-header{
  position:absolute;
  top:-40px;
  left:16px;
  right:16px;

  height:155px;
  padding:14px 18px;

  background:#fff;
  border-radius:30px;
  box-shadow:0 6px 18px rgba(0,0,0,.18);

  display:flex;
  align-items:flex-end;
  justify-content:flex-end;
  gap:12px;
 justify-content:space-between; /* ğŸ‘ˆ Ø§Ù„Ù…ÙØªØ§Ø­ */
  z-index:10;
}
.offer-title{
  position:absolute;
  top:6px;
  left:50%;
  transform:translateX(-50%);

  font-size:20px;
  font-weight:900;
  color:#8b0000;

  min-width:220px;           /* Ø¹Ø±Ø¶ Ø£Ø¯Ù†Ù‰ (Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ø±Ù‚Ù…) */
  z-index:20;

  animation:offerPulse 2.6s ease-in-out infinite;
  transform-style:preserve-3d;
}

@keyframes offerPulse{
  0%{
    transform:translateX(-50%) scale(1);
  }
  50%{
    transform:translateX(-50%) scale(1.08);
  }
  100%{
    transform:translateX(-50%) scale(1);
  }
}

.agency-box{
  display:flex;
  flex-direction:column;
  align-items:flex-start;   /* Ø§Ù„Ù†Øµ ÙŠØ¨Ø¯Ø£ Ø·Ø¨ÙŠØ¹ÙŠ */
  flex:1;                   /* â¬…ï¸ Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù…ÙØªØ§Ø­ */
  min-width:0;              /* ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø§Ù†ÙƒØ³Ø§Ø± Ø§Ù„ØºØ±ÙŠØ¨ */
}
.agency-logo{
margin-left:2px;   /* â¬…ï¸ ÙŠØ¯ÙØ¹Ù‡ ÙŠÙ…ÙŠÙ† */
margin-left:auto;          /* Ø£Ù‚ØµÙ‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */
  transform:translateX(10px);/* Ø¶Ø¨Ø· Ø¯Ù‚ÙŠÙ‚ */
  width:70px;
  height:auto;
  object-fit:contain;

  transform-style:preserve-3d;
  transition:.35s ease;

  filter:
    drop-shadow(0 6px 0 rgba(255,255,255,.7))
    drop-shadow(0 10px 18px rgba(0,0,0,.35));
}

.agency-logo:hover{
  transform:
    perspective(800px)
    translateY(-4px)
    translateZ(30px)
    rotateX(6deg)
    rotateY(-6deg);

  filter:
    drop-shadow(0 6px 0 rgba(255,255,255,.85))
    drop-shadow(0 18px 30px rgba(0,0,0,.55));
}
.agency-location{
  display:inline-flex;
  align-items:center;
  gap:6px;

  font-size:13px;
  font-weight:700;
  color:#8b0000;

  background:rgba(139,0,0,.08);
  border:1.5px solid rgba(139,0,0,.25);
  padding:4px 12px;
  border-radius:999px;   /* ğŸ‘ˆ Ø´ÙƒÙ„ Ø§Ù„Ø¨ÙˆÙŠØ¶Ø© */

  line-height:1;
}

.agency-location i{
  font-size:12px;
  color:#8b0000;
}
.agency-name{
  font-size:18px;
 justify-content:space-between; /* ÙŠÙˆØ²Ù‘Ø¹ Ø§Ù„Ù…Ø³Ø§Ø­Ø©*/
  font-weight:900;
color:#000 !important;
  white-space:normal;   /* ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„ØªÙ…Ø¯Ø¯
}

/* =========================
   DESKTOP CARD CONTROL
   Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© â€“ Ø­Ø§Ø³ÙˆØ¨ ÙÙ‚Ø·
========================= */
@media (min-width: 992px){



  /* Ø§Ù„ÙƒØ§Ø±Ø¯ */
  .card{
    display:flex;
    flex-direction:row;   /* â¬…ï¸ Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø¬Ø°Ø±ÙŠ */
    gap:24px;
    min-width:520px;
  }

  /* Ø§Ù„ØºÙŠÙ…Ø© ØªØµØ¨Ø­ Ø¹Ù…ÙˆØ¯ Ø¬Ø§Ù†Ø¨ÙŠ */
  .card-header{
    position:relative;
    top:auto;
    left:auto;
    right:auto;

    width:40%;
    height:auto;

    border-radius:28px;
    padding:24px;
  }

  /* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒØ§Ø±Ø¯ */
  .card-info{
    margin-top:0;
    width:60%;
    font-size:18px;
  }

  /* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø±Ø¶ */
  .offer-title{
    position:relative;
    top:auto;
    left:auto;
    transform:none;
    margin-bottom:14px;
    text-align:right;
  }

  /* Ø´Ø¹Ø§Ø± Ø§Ù„Ø·ÙŠØ±Ø§Ù† */
  .airline-card{
    position:relative;
    top:auto;
    left:auto;
    margin-top:10px;
  }

}



 
</style> 
</head>  
<body>
  <!-- Ù…Ø­ØªÙˆÙ‰ Ø«Ø§Ø¨Øª Ù„ÙÙŠØ³Ø¨ÙˆÙƒ -->
<div style="display:none">
  <h1>Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¹Ù…Ø±Ø© â€“ Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©</h1>
  <p>
    Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ù…Ø±Ø© Ù…Ù† ÙˆÙƒØ§Ù„Ø§Øª Ù…Ø¹ØªÙ…Ø¯Ø© ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ØŒ
    Ù…Ø¹ ØªÙˆØ§Ø±ÙŠØ® Ù…Ø®ØªÙ„ÙØ© ÙˆØ£Ø³Ø¹Ø§Ø± Ù…ØªÙ†ÙˆØ¹Ø© ÙˆØªØ³Ø¬ÙŠÙ„ Ø³Ù‡Ù„.
  </p>
</div>

<a href="https://wa.me/213674141379" target="_blank" class="whatsapp-top">  
<i class="fab fa-whatsapp"></i>  
</a>  
<header class="top-bar">
  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (ÙŠÙ…ÙŠÙ†) -->
  <div class="menu-btn" onclick="openMenu()">â˜°</div>
  <!-- Ø§Ù„Ø´Ø¹Ø§Ø± (ÙˆØ³Ø·) -->
  <div class="logo-center" onclick="openWelcome()">
  <img
  src="https://res.cloudinary.com/dmc36nijl/image/upload/v1769426692/ei_1769426620917-removebg-preview_yuws6p.png"
  alt="Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©"
  class="logo site-logo"
  onclick="openWelcome()">
  </div>
  <!-- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± (ÙŠØ³Ø§Ø±) -->
  <div class="visitor-box">
    <i class="fa-solid fa-users"></i>
    <div>
      <span id="visitors">0</span>
      <small>Ø²Ø§Ø¦Ø±</small>
    </div>
  </div>
</header>
 <nav id="sideMenu">  
<a href="results-gen.html">ğŸ•‹ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ø§Ù…Ø©</a>  
<a href="recherche-oeffer.html">ğŸ“© Ø·Ù„Ø¨ Ø¹Ø±Ø¶ Ø¹Ù…Ø±Ø©</a>  
<a href="recherche-n.html">ğŸ‘¤ ØµÙØ­ØªÙŠ Ø§Ù„Ø®Ø§ØµØ©</a>  
</nav>  
<div id="overlay" onclick="closeMenu()"></div>  <div class="container">  <div class="filters">  
<select id="fAgency"><option value="">ğŸ¢ ÙƒÙ„ Ø§Ù„ÙˆÙƒØ§Ù„Ø§Øª</option></select>  
<select id="fState"><option value="">ğŸ“ ÙƒÙ„ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª</option></select>  
<select id="fDate"><option value="">ğŸ“… ÙƒÙ„ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®</option></select>  
<select id="fAirport"><option value="">âœˆï¸ ÙƒÙ„ Ø§Ù„Ù…Ø·Ø§Ø±Ø§Øª</option></select>
</div> 
  <div id="offers">â³ Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶...</div>  
</div>  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ --> 
  <div id="detailsModal" onclick="closeDetails()">  
  <div class="modal-box" onclick="event.stopPropagation()">  
    <button onclick="closeDetails()"  
      style="position:absolute;top:10px;left:10px;  
      background:#8b0000;color:#fff;border:none;  
      border-radius:50%;width:32px;height:32px;  
      font-size:18px;cursor:pointer">Ã—</button>  <h3>ğŸ•‹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶</h3>  
<div id="detailsContent"></div>

  </div>  
</div> 
  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
  <div id="registerModal"
    
     style="display:none;
     position:fixed;
     inset:0;
     background:rgba(0,0,0,.6);
     z-index:25000;
     
     align-items:center;
     justify-content:center;">

  <div class="modal-box" onclick="event.stopPropagation()">
    <h3>ğŸ“© ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ø§Ù„Ø¹Ø±Ø¶</h3>

    <input id="cFirst" placeholder="Ø§Ù„Ø§Ø³Ù…">
    <input id="cLast" placeholder="Ø§Ù„Ù„Ù‚Ø¨">
    <input id="cPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">

    <button onclick="sendRegister()">Ø¥Ø±Ø³Ø§Ù„</button>

    <button onclick="closeRegisterModal()"
      style="width:100%;padding:10px;margin-top:6px">
      Ø¥Ù„ØºØ§Ø¡
    </button>
  </div>
</div>

</div> 
 

  <script>   OFFERS_API="https://script.google.com/macros/s/AKfycbwN-Mgn61HDqdCD2_shOx3nRAcW-O8GxquhSpxaSX0Az00W1W_48lVFCowDqF41ZN_7dQ/exec";  
  
let offersData=[], selectedOffer=null;  
   function openWaModalByIndex(i){
  const o = offersData[i];
  if(!o) return;
  openWaModal(o);
}
const fAgency=document.getElementById("fAgency");  
const fState=document.getElementById("fState");  
const fDate=document.getElementById("fDate");  
const offers=document.getElementById("offers");  
  const fAirport = document.getElementById("fAirport");

function formatDate(d){  
  return d ? new Date(d).toLocaleDateString("ar-DZ") : "-";  
}  
  
fetch(OFFERS_API)
  .then(r => r.text())
  .then(txt => {
    const data = JSON.parse(txt);
    offersData = data;
    fillFilters();
    render();
  })
  .catch(err => {
    console.error("Ø®Ø·Ø£ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶:", err);
    offers.innerHTML = "âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶";
  });

  
function fillFilters(){  
  const A=new Set(),S=new Set(),D=new Set(), P=new Set();  
  offersData.forEach(o=>{  
    if(o.agency) A.add(o.agency);  
    if(o.state) S.add(o.state);  
    if(o.date) D.add(formatDate(o.date));  
     if(o.airport) P.add(o.airport);  
  });  
  A.forEach(v=>fAgency.add(new Option(v,v)));  
  S.forEach(v=>fState.add(new Option(v,v)));  
  D.forEach(v=>fDate.add(new Option(v,v)));  
P.forEach(v=>fAirport.add(new Option(v,v))); 
}  
  function formatDateArabicFull(dateStr){
  if(!dateStr) return "-";

  const days = [
    "Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡",
    "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"
  ];

  const months = [
    "Ø¬Ø§Ù†ÙÙŠ","ÙÙŠÙØ±ÙŠ","Ù…Ø§Ø±Ø³","Ø£ÙØ±ÙŠÙ„","Ù…Ø§ÙŠ","Ø¬ÙˆØ§Ù†",
    "Ø¬ÙˆÙŠÙ„ÙŠØ©","Ø£ÙˆØª","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"
  ];

  const d = new Date(dateStr);
  return `${days[d.getDay()]} ${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;
}
function getDateStatus(dateStr){
  if(!dateStr) return "far";

  const travel = new Date(dateStr);
  if(isNaN(travel)) return "far";

  const today = new Date();
  today.setHours(0,0,0,0);
  travel.setHours(0,0,0,0);

  const diffDays = Math.round(
    (travel - today) / (1000 * 60 * 60 * 24)
  );

  if(diffDays <= 15) return "soon";
  if(diffDays <= 40) return "mid";
  return "far";
}

  function getRemainingText(dateStr){
  if(!dateStr) return "";

  const travel = new Date(dateStr);
  if(isNaN(travel)) return "";

  const today = new Date();
  today.setHours(0,0,0,0);
  travel.setHours(0,0,0,0);

  const diff = Math.round((travel - today) / (1000*60*60*24));

  if(diff === 0) return "ğŸš€ Ø§Ù„ÙŠÙˆÙ… Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø±Ø­Ù„Ø©";
  if(diff === 1) return "âš ï¸ ØºØ¯Ù‹Ø§ Ø§Ù„Ø§Ù†Ø·Ù„Ø§Ù‚";
  if(diff > 1)  return `â³ Ù…ØªØ¨Ù‚ÙŠ ${diff} ÙŠÙˆÙ…`;
  return "â›” ØªØ§Ø±ÙŠØ® Ù…Ù†Ù‚Ø¶ÙŠ";
}

function render(){  
  offers.innerHTML="";  
  let list=[...offersData];  
  
  if(fAgency.value) list=list.filter(o=>o.agency===fAgency.value);  
  if(fState.value) list=list.filter(o=>o.state===fState.value);  
  if(fDate.value) list=list.filter(o=>formatDate(o.date)===fDate.value); 
  if(fAirport.value) list = list.filter(o => o.airport === fAirport.value);

  const grouped={};  
  list.forEach(o=>{  
    const ap=o.airport||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯";  
    if(!grouped[ap]) grouped[ap]=[];  
    grouped[ap].push(o);  
  });  
  
  Object.keys(grouped).forEach(ap=>{  
    const g=document.createElement("div");  
    // ØªØ±ØªÙŠØ¨ Ø±Ø­Ù„Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ù…Ø·Ø§Ø± Ø­Ø³Ø¨ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ (Ø§Ù„Ø£Ù‚Ø±Ø¨ Ø£ÙˆÙ„Ø§Ù‹)  
grouped[ap].sort((a, b) => new Date(a.date) - new Date(b.date));  
  
    g.className="airport-group";  
    g.innerHTML=`<div class="airport-title">âœˆï¸ ${ap}</div>`;  
    const r=document.createElement("div");  
    r.className="airport-row";  
  
    grouped[ap].forEach(o=>{  
      const c=document.createElement("div");  
      c.className="card";        
  c.innerHTML = `
  <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø±Ø¶ -->
<div class="offer-title">
  ğŸ•‹ ${o.offer}
</div>

<!-- Ø§Ù„ØºÙŠÙ…Ø© -->
<div class="card-header">

  <!-- Ø´Ø¹Ø§Ø± Ø§Ù„ÙˆÙƒØ§Ù„Ø© -->
  <img src="${o.logo || ''}" class="agency-logo">

  <!-- Ø§Ø³Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø© + Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
  <div class="agency-box">
    <div class="agency-name">${o.agency}</div>
    <div class="agency-location">
      <i class="fa-solid fa-location-dot"></i>
      ${o.state}
    </div>
  </div>

</div>
<div class="travel-date">
  <i class="fa-regular fa-calendar-days"></i>
  <span>Ø§Ù„Ø§Ù†Ø·Ù„Ø§Ù‚:</span>

  <span class="date-color ${getDateStatus(o.date)}">
    <strong>${formatDateArabicFull(o.date)}</strong>
    <span class="remain">${getRemainingText(o.date)}</span>
  </span>
</div>


    <div>ğŸ¨ Ø§Ù„ÙÙ†Ø¯Ù‚: ${o.hotel || "-"}</div>
    <div>â±ï¸ Ø§Ù„Ù…Ø¯Ø©: ${o.duration || "-"}</div>
    <div>âœˆï¸ Ø§Ù„Ø±Ø­Ù„Ø©: ${o.flight || "-"}</div>

    <div class="airline-card ${!o.airlineLogo ? 'empty' : ''}">
      ${o.airlineLogo ? `<img src="${o.airlineLogo}">` : ``}
    </div>

    <div class="price-box">
      <div class="price">ğŸ’° ${o.group} Ø¯Ø¬</div>
      

    <button class="wa-price" onclick="openWaModalByIndex(${offersData.indexOf(o)})">
      <i class="fab fa-whatsapp"></i>
    </button>
   

  </div>

  <div class="card-actions">
 <button onclick="openDetailsByIndex(${offersData.indexOf(o)})">â„¹ï¸ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
<button onclick="shareOfferByIndex(${offersData.indexOf(o)})">ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ©</button>
<button onclick="openRegisterByIndex(${offersData.indexOf(o)})">ğŸ“© ØªØ³Ø¬ÙŠÙ„</button>

  </div>
`;
      r.appendChild(c);  
    });  
  
    g.appendChild(r);  
    offers.appendChild(g);  
  });  
}  
  
fAgency.onchange=render;  
fState.onchange=render;  
fDate.onchange=render;  
  fAirport.onchange = render;

function openDetails(o){  
detailsContent.innerHTML = `  
  <p>ğŸ•‹ <strong>Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¶:</strong> ${o.offer || "-"}</p>  
  
  <hr>  
  
  <p>ğŸ¢ <strong>Ø§Ù„ÙˆÙƒØ§Ù„Ø©:</strong> ${o.agency || "-"}</p>  
  <p>ğŸ“ <strong>Ø§Ù„ÙˆÙ„Ø§ÙŠØ©:</strong> ${o.state || "-"}</p>  
  <p>ğŸ™ï¸ <strong>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</strong> ${o.city || "-"}</p>  
  <hr>  
  <p>ğŸ“… <strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø±Ø­Ù„Ø©:</strong> ${formatDate(o.date)}</p>  
  <p>â±ï¸ <strong>Ù…Ø¯Ø© Ø§Ù„Ø±Ø­Ù„Ø©:</strong> ${o.duration || "-"}</p>  
  <p>âœˆï¸ <strong>Ù†ÙˆØ¹ Ø§Ù„Ø±Ø­Ù„Ø©:</strong> ${o.flight || "-"}</p>  
  <p>ğŸ›« <strong>Ù…Ø·Ø§Ø± Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹:</strong> ${o.airport || "-"}</p>  
  <hr>  
  <p>ğŸ¨ <strong>Ø§Ù„ÙÙ†Ø¯Ù‚:</strong> ${o.hotel || "-"}</p>  
  <hr>  
  <p>ğŸ’° <strong>Ø§Ù„Ø£Ø³Ø¹Ø§Ø±:</strong></p>  
  <p>ğŸ‘¥ Ø¬Ù…Ø§Ø¹ÙŠØ©: ${o.group || "-"} Ø¯Ø¬</p>  
  <p>ğŸ›ï¸ Ø®Ù…Ø§Ø³ÙŠØ©: ${o.five || "-"} Ø¯Ø¬</p>  
  <p>ğŸ›ï¸ Ø±Ø¨Ø§Ø¹ÙŠØ©: ${o.four || "-"} Ø¯Ø¬</p>  
  <p>ğŸ›ï¸ Ø«Ù„Ø§Ø«ÙŠØ©: ${o.three || "-"} Ø¯Ø¬</p>  
  <p>ğŸ›ï¸ Ø«Ù†Ø§Ø¦ÙŠØ©: ${o.two || "-"} Ø¯Ø¬</p>  
  
  `;  
  detailsModal.style.display="flex";  
}  
function closeDetails(){detailsModal.style.display="none";}  
  
function shareOffer(o){  
  const text=`ğŸ•‹ Ø¹Ø±Ø¶ Ø¹Ù…Ø±Ø©  
${o.offer}  
  
<div class="airline-card">  
  <img src="${o.airlineLogo || ''}"   
       onerror="this.style.display='none'">  
  <span>${o.airline || ''}</span>  
</div>  
</div>  
ğŸ¢ ${o.agency}  
âœˆï¸ ${o.airport}  
ğŸ“… ${formatDate(o.date)}  
ğŸ’° ${o.group} Ø¯Ø¬`;  
  navigator.share  
    ? navigator.share({text})  
    : window.open("https://wa.me/?text="+encodeURIComponent(text));  
}  
  function openRegister(o){
  selectedOffer = o;
  document.getElementById("registerModal").style.display = "flex";
}

function closeRegisterModal(){
  document.getElementById("registerModal").style.display = "none";
}

function sendRegister(){  
  if(!cFirst.value||!cLast.value||!cPhone.value){  
    alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");  
    return;  
  }  
  
  sessionStorage.setItem("umrahRegister",JSON.stringify({  
    first:cFirst.value,  
    last:cLast.value,  
    phone:cPhone.value,  
    offer:selectedOffer.offer,  
    agency:selectedOffer.agency,  
    logo:selectedOffer.logo,  
    price:selectedOffer.group  
  }));  
  
  location.href="results-fenal.html";  
}  
function openMenu(){sideMenu.style.right="0";overlay.style.display="block"}  
function closeMenu(){sideMenu.style.right="-260px";overlay.style.display="none"}   
let waOffer = null;  
  
const waFirst = document.getElementById("waFirst");
const waLast  = document.getElementById("waLast");
const waPhone = document.getElementById("waPhone");
// ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©  
function openWaModal(o){  
  waOffer = o;  
  document.getElementById("waModal").style.display = "flex";  
}  
  
// ØºÙ„Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©  
function closeWaModal(){  
  document.getElementById("waModal").style.display = "none";  
}  
  
// ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„  
function confirmWhatsApp() {
  const waFirst = document.getElementById("waFirst").value.trim();
  const waLast  = document.getElementById("waLast").value.trim();
  const waPhone = document.getElementById("waPhone").value.trim();

  if(!waFirst || !waLast || !waPhone){  
    alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");  
    return;  
  }  

  const clientName  = waFirst + " " + waLast;  
  const clientPhone = waPhone;  
  let agencyPhone = String(waOffer.phone || "").replace(/\D/g,"");  

  if(!agencyPhone){  
    alert("Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„ÙˆÙƒØ§Ù„Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±");  
    return;  
  }  
  if(!agencyPhone.startsWith("213")){  
    agencyPhone = "213" + agencyPhone;  
  }  

  const message = `Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… ğŸŒ¿\n\nØ£Ù†Ø§ ${clientName}\nØ±Ù‚Ù… Ù‡Ø§ØªÙÙŠ: ${clientPhone}\nØ£Ø±ØºØ¨ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ø¹Ø±Ø¶ Ø¹Ù…Ø±Ø©: ${waOffer.offer} Ù…Ù† Ø§Ù„ÙˆÙƒØ§Ù„Ø© ${waOffer.agency}\nØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹: ${formatDate(waOffer.date)}\nØ§Ù„ÙÙ†Ø¯Ù‚: ${waOffer.hotel || "-"}\nØ§Ù„Ø³Ø¹Ø±: ${waOffer.group} Ø¯Ø¬`;

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Google Sheets
// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Google Sheets + Email
fetch("https://script.google.com/macros/s/AKfycbxwSqMkAfsX8lFz3OvO_y8ANKQLNPtXvBq9c-CDx9-GBJfxCa-3S6jYKN4uPMW520Qt/exec", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    agency: waOffer.agency,
    offer: waOffer.offer,
    date: waOffer.date,
    hotel: waOffer.hotel,
    price: waOffer.group,
    agencyPhone: agencyPhone,
    clientName: clientName,
    clientPhone: clientPhone
  })
})
.then(res => res.text()) // Ù„Ø£Ù† Apps Script ÙŠØ±Ø¬Ø¹ Ù†Øµ
.then(data => {

  console.log("ØªÙ… Ø§Ù„Ø­ÙØ¸:", data);

  // Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­ âœ ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨
  const waURL =
    "https://wa.me/" +
    agencyPhone +
    "?text=" +
    encodeURIComponent(message);

  window.open(waURL, "_blank");

  closeWaModal();
})
.catch(err => {
  console.error("Ø®Ø·Ø£:", err);
  alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ØŒ Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§");
});

 
fetch("https://script.google.com/macros/s/AKfycbzWqaWF63u80EldQZABBexMJyOdVm089qG8Uy5DlyQ1YutXusvo4ow0K09OlYvFnuug/exec", {  
  cache: "no-store"  
})  
.then(r => r.json())  
.then(d => document.getElementById("visitors").textContent = d.count);  
  
function openWelcome(){
  document.getElementById("welcomeModal").style.display="flex";
}
function closeWelcome(){
  document.getElementById("welcomeModal").style.display="none";
}



</script>  
<!-- Ù†Ø§ÙØ°Ø© ÙˆØ§ØªØ³Ø§Ø¨ -->
<div id="waModal"
     onclick="closeWaModal()"
     style="
     display:none;
     position:fixed;
     inset:0;
     background:rgba(0,0,0,.6);
     z-index:30000;
     align-items:center;
     justify-content:center;
     ">

  <div class="modal-box" onclick="event.stopPropagation()">

    <h3>ğŸ“² ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</h3>

    <input id="waFirst" placeholder="Ø§Ù„Ø§Ø³Ù…">
    <input id="waLast" placeholder="Ø§Ù„Ù„Ù‚Ø¨">
    <input id="waPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">

    <button onclick="confirmWhatsApp()"
      style="width:100%;padding:10px;margin-top:10px;background:#25D366;color:#fff;border:none;border-radius:10px">
      Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
    </button>

    <button onclick="closeWaModal()"
      style="width:100%;padding:10px;margin-top:6px">
      Ø¥Ù„ØºØ§Ø¡
    </button>

  </div>
</div>
<div id="welcomeModal" style="
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  z-index:30000;
  align-items:center;
  justify-content:center;
" onclick="closeWelcome()">
  <div style="
    background:#fff;
    padding:25px;
    border-radius:18px;
    max-width:420px;
    width:90%;
    text-align:center;
    font-family:Tajawal,Arial;
  " onclick="event.stopPropagation()">

    <h2 style="color:#8b0000;margin-top:0">
      Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨ÙƒÙ… ÙÙŠ Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø© ğŸ•‹
    </h2>

    <p>
      Ù…ÙˆÙ‚Ø¹ <b>Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø±Ø©</b> ÙŠØ³Ù‡Ù‘Ù„ Ø¹Ù„ÙŠÙƒÙ… ØªØµÙØ­
      Ø£ÙØ¶Ù„ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ù…Ø±Ø© Ù…Ù† ÙˆÙƒØ§Ù„Ø§Øª <b>Ù…Ø±Ø®ØµØ© ÙˆÙ…Ø¹ØªÙ…Ø¯Ø©</b>ØŒ
      Ù…Ø¹ ØªØ³Ø¬ÙŠÙ„ Ø³Ù‡Ù„ ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ø¶Ø­Ø©.
    </p>

    <p style="font-weight:bold;color:#0b5f3c">
      Ù†ÙŠØªÙƒ ØµØ§Ø¯Ù‚Ø©â€¦ ÙˆØ§Ù„Ø·Ø±ÙŠÙ‚ Ø¹Ù„ÙŠÙ†Ø§ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡ ğŸ¤²
    </p>

    <button onclick="closeWelcome()" style="
      margin-top:15px;
      padding:10px 20px;
      border:none;
      background:#8b0000;
      color:#fff;
      border-radius:10px;
      cursor:pointer;
    ">
      Ø¥ØºÙ„Ø§Ù‚
    </button>
 </body>  

</html>  
